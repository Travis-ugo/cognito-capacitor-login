{"version":3,"file":"main.js","mappings":"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AwO,GAAA;QAAA,OAAAP,KAAA,CAAA/M,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC;EACJ,CAAC,CAAC;AACJ;AACAsK,gFAAoB,CAACvY,4DAAY,EAAE;EACjCub,SAAS,EAAE,CACT/C,wEAAiB,CAACC,uEAAgB,CAAC,CAAC9J,kEAAe,CAAC,CAAC,CAAC,EACtD0J,kEAAmB,CAACzY,wDAAW,CAAC4b,OAAO,EAAE,EAAE1C,uEAAkB,CAAC0C,OAAO,EAAE,CAAC,EACxE3C,iEAAoB,CAAC;IACnB4C,MAAM,EAAEzC;GACT,CAAC;EACF;EACA;EACAN,+DAAa,CACXE,2DAAM,EACN,IAAI5E,2DAAU,CAAC,WAAW,CAAC,GAAG,CAAC2E,kEAAgB,EAAE,CAAC,GAAG,EAAE,CAAC,CACzD;CAEJ,CAAC,CAAChM,KAAK,CAAEG,GAAG,IAAK9L,OAAO,CAACQ,KAAK,CAACsL,GAAG,CAAC,CAAC,C;;;;;;;;;;AC9NrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;;;AC/PyC;AACiC;AAC7B;AAEtC,MAAM8L,MAAM,GAAW;AAC5B;AACA;EACEiD,IAAI,EAAE,EAAE;EACRC,aAAa,EAAEA,CAAA,KAAM,+bAAkC,CAAC5Z,IAAI,CAAE6Z,CAAC,IAAIA,CAAC,CAACC,SAAS;CAC/E;AACD;AACA;EACEH,IAAI,EAAE,MAAM;EACZC,aAAa,EAAEA,CAAA,KAAM,2bAAgC,CAAC5Z,IAAI,CAAC6Z,CAAC,IAAIA,CAAC,CAACE,QAAQ,CAAC;EAC3E/D,WAAW,EAAE,CAACD,wDAAe;CAC9B;AACD;AACA;EACE4D,IAAI,EAAE,SAAS;EACfK,YAAY,EAAEA,CAAA,KAAM,2dAAgD,CAACha,IAAI,CAACia,CAAC,IAAIA,CAAC,CAACC,oBAAoB;CACtG,EACD;EACEP,IAAI,EAAE,UAAU;EAChBC,aAAa,EAAEA,CAAA,KAAM,qeAAqD,CAAC5Z,IAAI,CAAE6Z,CAAC,IAAIA,CAAC,CAACM,iBAAiB;CAC1G;AACD;AACA;EACER,IAAI,EAAE,IAAI;EACVC,aAAa,EAAEA,CAAA,KAAM,+bAAkC,CAAC5Z,IAAI,CAAE6Z,CAAC,IAAIA,CAAC,CAACC,SAAS;CAC/E,CACF;AAQM,IAAMM,gBAAgB,GAAtB,MAAMA,gBAAgB,GAAG;AAAnBA,gBAAgB,GAAA5Z,iDAAA,EAN5BgZ,uDAAQ,CAAC;EACR5Y,OAAO,EAAE,CACP8Y,yDAAY,CAACJ,OAAO,CAAC5C,MAAM,EAAE;IAAE2D,kBAAkB,EAAEZ,8DAAiBA;EAAA,CAAE,CAAC,CACxE;EACDa,OAAO,EAAE,CAACZ,yDAAY;CACvB,CAAC,C,EACWU,gBAAgB,CAAG","sources":["./src/app/app.component.ts","./src/app/services/utility.service.ts","./src/app/services/user.service.ts","./src/app/auth.interceptor.ts","./src/app/app.component.scss","./src/app/services/auth.service.ts","./src/environments/environment.ts","./node_modules/@stencil/core/internal/client/ lazy ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ strict namespace object","./src/app/utils/capacitor-storage.ts","./src/app/auth.guard.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./src/app/app-routing.module.ts"],"sourcesContent":["import 'aws-amplify/auth/enable-oauth-listener';\nimport {Component, OnInit} from '@angular/core';\nimport {Router, NavigationEnd} from '@angular/router';\nimport {filter} from 'rxjs';\nimport {UserService} from './services/user.service';\nimport {UtilityService} from './services/utility.service';\nimport {IonicModule} from '@ionic/angular';\nimport {App} from '@capacitor/app';\nimport { EdgeToEdge } from '@capawesome/capacitor-android-edge-to-edge-support';\nimport { StatusBar, Style } from '@capacitor/status-bar';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.scss'],\n  imports: [IonicModule],\n  standalone: true\n})\nexport class AppComponent implements OnInit {\n  constructor(\n    public router: Router,\n    private userSrv: UserService,\n    private utils: UtilityService,\n  ) {\n    // OAuth deep link handling is now in main.ts\n  }\n\n  private async handleOAuthCallback() {\n    // Check if current URL contains OAuth callback parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const state = urlParams.get('state');\n\n    if (code && state) {\n      console.log('OAuth callback detected with code:', code);\n\n      try {\n        // Import Amplify auth functions\n        const { getCurrentUser } = await import('@aws-amplify/auth');\n\n        // Wait a moment for Amplify to process the OAuth callback\n        await new Promise(resolve => setTimeout(resolve, 2000));\n\n        // Check if user is now authenticated\n        const user = await getCurrentUser();\n        console.log('User authenticated:', user);\n\n        // Navigate to home page\n        this.router.navigate(['/home']);\n      } catch (error) {\n        console.error('Authentication failed:', error);\n        // If authentication failed, redirect to signup page\n        this.router.navigate(['/account/signup']);\n      }\n    }\n  }\n\n  async ngOnInit() {\n    await EdgeToEdge.enable();\n    await EdgeToEdge.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setStyle({ style: Style.Light });\n\n    // Check if this is an OAuth callback URL\n    this.handleOAuthCallback();\n\n    try {\n      console.log('App initialized - RevenueCat ready');\n    } catch (error) {\n      console.error('Failed to initialize subscription service', error);\n    }\n\n    this.utils.operatingSystem().then((os) => {\n      if(os === 'ios') {\n        /*this.analyticsSrv.attGetStatus().then((optIn: boolean) => {\n          this.userSrv.preferences.analytics = optIn;\n          if (optIn) {\n            this.analyticsSrv.initFb().then(() => {\n              this.analyticsSrv.analyticsOptIn(optIn).then(() => this.watchRoutes()).catch((e) => console.error(e));\n            });\n          }\n        });*/\n      } else {\n        // not iOS - optIn handled from register/profile page, so initialise and set to false\n        /*this.analyticsSrv.initFb().then(() => {\n          this.analyticsSrv.analyticsOptIn(false).then(() => this.watchRoutes()).catch((e) => console.error(e));\n        });*/\n      }\n    });\n  }\n  watchRoutes() {\n    this.router.events.pipe(\n      filter(event => event instanceof NavigationEnd)\n    ).subscribe((event) => {\n      const navigationEndEvent = event as NavigationEnd;\n      // this.analyticsSrv.setScreenName(navigationEndEvent.urlAfterRedirects).catch(err => console.error('Failed to set screen name:', err));\n    });\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {Device} from '@capacitor/device';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilityService {\n  constructor() {}\n  getTimezoneOffset() {\n    return new Date().getTimezoneOffset();\n  }\n  getDateTime() {\n    // YYYY-MM-DDTHH:MM:SS\n    return new Date().toISOString().slice(0, 19);\n  }\n  getDate() {\n    // YYYY-MM-DD\n    return new Date().toISOString().slice(0, 10);\n  }\n  getFutureDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() + days);\n  }\n  getFutureDateYYYYMMDD(days) {\n    const timestamp = this.getFutureDate(days);\n    const date = new Date(timestamp);\n    return date.toISOString().slice(0, 10);\n  }\n  getPastDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() - days);\n  }\n  // https://stackoverflow.com/questions/46068084/calculating-week-number-with-typescript-right-hand-side-of-an-arithmetic-opera\n  getWeekNumber(dt: Date, type: 'int' | 'string' = 'int'): string {\n    const firstDayOfYear = new Date(dt.getFullYear(), 0, 1);\n\n    const startOfYearWeek = new Date(firstDayOfYear);\n    startOfYearWeek.setDate(firstDayOfYear.getDate() - firstDayOfYear.getDay());\n\n    const startOfCurrentWeek = new Date(dt);\n    startOfCurrentWeek.setDate(dt.getDate() - dt.getDay());\n\n    const msInWeek = 7 * 24 * 60 * 60 * 1000;\n    const weekNum = Math.floor((startOfCurrentWeek.getTime() - startOfYearWeek.getTime()) / msInWeek) + 1;\n    // returns ISO week date format YYYY-W01 minus current day, because we want the year / week number only.\n    if (type === 'string') {\n      return dt.getFullYear().toString() + '-W' + weekNum;\n    }\n    return weekNum.toString();\n  }\n  // https://stackoverflow.com/questions/4156434/javascript-get-the-first-day-of-the-week-from-current-date\n  getMonday(dt) {\n    const d = new Date(dt);\n    const day = d.getDay(),\n        diff = d.getDate() - day + (day === 0 ? -6:1); // adjust when day is sunday\n    const mon = new Date(d.setDate(diff));\n    return mon.getDate() + ' ' + this.months(mon.getMonth()) + ' ' + mon.getFullYear();\n  }\n  months(month) {\n    const monthL = [\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    const monthS = [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ];\n    return monthL[month];\n  }\n  days(day) {\n    const dayL = [\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n    const dayS = [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n    ];\n    return dayL[day];\n  }\n  getFirstDayOfWeek(week, y) {\n    const d = new Date('Jan 01, ' + y + ' 01:00:00');\n    const dayMs = (24 * 60 * 60 * 1000);\n    const offSetTimeStart = dayMs * (d.getDay() - 1);\n    const w = d.getTime() + 604800000 * (week - 1) - offSetTimeStart; // reducing the offset here\n    const n1 = new Date(w).toISOString().slice(0, 10);\n    const n2 = new Date(w + 518400000).toISOString().slice(0, 10);\n    return {\n      dateFrom: n1,\n      dateTo: n2,\n    }\n  }\n  timestampToMysqlDate(timestamp: number): string {\n    // Create a Date object from the Unix timestamp\n    const date = new Date(timestamp * 1000);\n\n    // Extract year, month, day, hours, minutes, and seconds\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are zero-based\n    const day = String(date.getDate()).padStart(2, '0');\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    const seconds = String(date.getSeconds()).padStart(2, '0');\n\n    // Combine into MySQL date format (YYYY-MM-DD HH:MM:SS)\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n  }\n  pagination(content, start, end) {\n    const result = [];\n    content.slice(start, end).map(i => {\n      result.push(i);\n    });\n    return result;\n  }\n  getRandomList(array, numberRequired) {\n    const result = [];\n    const taken = [];\n    const length = array.length;\n    if (numberRequired > length) {\n      throw new RangeError('getRandom: more elements taken than available');\n    }\n    let currentAmount = 0; // create an index to iterate through\n    while (currentAmount < numberRequired) { // while our index iterator (current items) is less than the required number of items..\n      const randomInt = Math.floor(Math.random() * length); // generate a random number between 0 and length of source array\n      if(taken.includes(randomInt)) { // if the random number exists in our taken array..\n        continue;  // skip this iteration to avoid a duplicate\n      } else {\n        taken[randomInt] = randomInt; // if random number not already used, then add it to the taken array to prevent it being used again\n      }\n      result[currentAmount] = array[randomInt]; // use the random number to get an item from source array and add to our result array\n      currentAmount++; // increment the index to move onto the next item\n    }\n    return result;\n  }\n  // removes duplicates from an array of objects\n  removeDuplicates(originalArray, field) {\n    const newArray = [];\n    const lookupObject  = {};\n    for (const x of Object.keys(originalArray)) {\n      lookupObject[originalArray[x][field]] = originalArray[x];\n    }\n    for(const x of Object.keys(lookupObject)) {\n      newArray.push(lookupObject[x]);\n    }\n    return newArray;\n  }\n  videoFormat() {\n    const video = document.createElement('video');\n    let format = '';\n    if (Boolean(video.canPlayType('application/x-mpegURL'))) {\n      format = 'x-mpegURL';\n    } else if (Boolean(video.canPlayType('application/dash+xml'))) {\n      format = 'dash+xml';\n    } else if (Boolean(video.canPlayType('video/mp4'))) {\n      format = 'video/mp4';\n    } else {\n      format = 'video playback not possible';\n    }\n    return format;\n  }\n  // accepts an array and an object property name to group by, returns an associative array.\n  groupBy(objectArray: any[], property: string) {\n    return objectArray.reduce((acc, obj) => {\n      const key = obj[property]\n      if (!acc[key]) {\n        acc[key] = []\n      }\n      acc[key].push(obj);\n      return acc;\n    }, {})\n  }\n  async deviceInfo() {\n    return await Device.getInfo();\n  }\n  async operatingSystem() {\n    const deviceInformation = await this.deviceInfo();\n    const operatingSystem = deviceInformation.operatingSystem; // 'ios' | 'android' | 'windows' | 'mac' | 'unknown'\n    if (operatingSystem === 'mac' || operatingSystem === 'ios') {\n      return 'ios';\n    }\n    return operatingSystem;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {AuthService} from './auth.service';\nimport {concatMap, from, Observable} from 'rxjs';\nimport {UtilityService} from './utility.service';\nimport {Router} from '@angular/router';\nimport {environment} from '../../environments/environment';\nimport {\n  ActionPerformed,\n  PushNotificationSchema,\n  PushNotifications,\n  Token,\n} from '@capacitor/push-notifications';\nimport {Capacitor} from '@capacitor/core';\n// import {ApiGatewayService} from './apigateway.service';\n// import {AnalyticsService} from './analytics.service';\n// import {LoggerService} from './logger.service';\n// import {SubscriptionsService} from './subscriptions.service';\nimport {map} from 'rxjs/operators';\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  public sub: string;\n  private cdn = environment.cdn;\n  private userAttributes: any;\n  private userData: any;\n  public preferences: {\n    newsletter: boolean,\n    analytics: boolean,\n    notifications: boolean\n  } = {\n    newsletter: false,\n    analytics: false,\n    notifications: false,\n  }\n  constructor(\n    private auth: AuthService,\n    private utils: UtilityService,\n    private router: Router,\n  ) {\n    this.pushListener();\n  }\n  /**\n   * API Functions for DynamoDB user record\n   */\n  public getUserData(user: string): Observable<any> {\n    // return this.api.get('userData/users?pk=' + user)\n    return from(user)\n  }\n  public updateUserProfile(body: any): Observable<any> {\n    // return this.api.patch('userData', body);\n    return from(body);\n  }\n  public deleteUserProfile(user: string): Observable<any> {\n    // return this.api.delete('userData/users?pk='+user+'&sk='+user);\n    return from(user);\n  }\n  public logDeleteRequest(user: string): Observable<any> {\n    const body: any = {\n      pk: 'deleteUserRequest',\n      sk: this.utils.getDate(),\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        requestDate: this.utils.getDateTime(),\n        userId: user\n      }\n    }\n    // return this.api.post('userData', body);\n    return from(body);\n  }\n\n  /**\n   * post user data to email marketing platform\n   */\n  public newsletterSubscription() {\n    return this.auth.getUserAttributes().pipe(\n      concatMap((userAttributes) => {\n        this.userAttributes = userAttributes;\n        return this.getUserProfile();\n      }),\n      concatMap((userData) => {\n        this.userData = userData[0].dataMap;\n        // return this.subsSrv.subscribed;\n        return userData;\n      }),\n      concatMap((subscribed) => {\n        const avatar = this.userData.avatar ? this.cdn+this.userData?.avatar : this.cdn+'happyme-app-logo.svg';\n        const avatarId = this.userData?.avatarId ? this.cdn+this.userData?.avatarId : 3;\n        const request: any = {\n          email: this.userAttributes.email,\n          subscribed,\n          avatarId,\n          avatar,\n          emailBlacklisted: !this.userData.optInNewsletter\n        }\n        // return this.api.post('subscriptions/newsletter', request);\n        return from(request);\n      })\n    )\n  }\n  public setNotification(notification: { section: any; status: any; time?: any; }) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        // opt into notifications if true\n        if(notification.status === true) {\n          this.pushSubscription(true);\n        }\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          dataMap: {\n            notifications: {\n              [notification.section]: notification\n            }\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  public pushSubscription(optInReminders: boolean): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (Capacitor.isNativePlatform()) {\n        if (optInReminders) {\n          // Request permission to use push notifications\n          PushNotifications.requestPermissions().then(result => {\n            if (result.receive === 'granted') {\n              // Register with Apple / Google to receive push via APNS/FCM\n              PushNotifications.register()\n                .then(() => {\n                  resolve('granted'); // Resolve the promise with 'granted'\n                })\n                .catch(error => {\n                  reject(error); // Reject if registration fails\n                });\n            } else if (result.receive === 'denied') {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('denied'), // Resolve with 'denied'\n                error: err => reject(err), // Reject if update fails\n              });\n            }\n          }).catch(error => {\n            reject(error); // Reject if permission request fails\n          });\n        } else {\n          // Unsubscribe from push notifications\n          PushNotifications.unregister()\n            .then(() => {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('unsubscribed'), // Resolve with 'unsubscribed'\n                error: err => reject(err), // Reject if update fails\n              });\n            })\n            .catch(error => {\n              reject(error); // Reject if unregister fails\n            });\n        }\n      } else {\n        resolve('unsupported'); // For non-native platforms\n      }\n    });\n  }\n  pushListener() {\n    if(Capacitor.isNativePlatform()) {\n      // On success, we should be able to receive notifications\n      void PushNotifications.addListener('registration', (token: Token) => {\n        this.updateUserPushSub(token.value).subscribe();\n      });\n      // Some issue with our setup and push will not work\n      void PushNotifications.addListener('registrationError',\n        (error: any) => {\n          const body = {\n            pk: 'pushNotification#RegistrationError',\n            sk: this.utils.getDateTime(),\n            dataMap: error,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Show us the notification payload if the app is open on our device\n      void PushNotifications.addListener('pushNotificationReceived',\n        (notification: PushNotificationSchema) => {\n          const body = {\n            pk: 'pushNotification#Received',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Method called when tapping on a notification\n      void PushNotifications.addListener('pushNotificationActionPerformed',\n        (notification: ActionPerformed) => {\n          const body = {\n            pk: 'pushNotification#ActionPerformed',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n    }\n  }\n  /**\n   * Get User ID from Cognito and use it to get User Data in DynamoDB\n   */\n  public getUserProfile(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        return this.getUserData(user);\n      })\n    );\n  }\n  /**\n   * creates or updates a user record in DynamoDB, to save user related data\n   */\n  public updateUser(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        this.sub = user;\n        return this.getUserData(user);\n      }),\n      concatMap(userData => {\n        if(userData.length === 0) {\n          return this.createUser(this.sub);\n        } else {\n          return this.updateUserAtLogin(this.sub);\n        }\n      })\n    );\n  }\n  public updateUserPushSub(token: string) {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        const userData = {\n          pk: 'users#' + user,\n          sk: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            fcmToken: token,\n            timezoneOffset: this.utils.getTimezoneOffset()\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  /**\n   * Create user in DynamoDB\n   * Save app-state variables against user in DynamoDB.\n   */\n  private createUser(user: string): Observable<any> {\n    const userData: any = {\n      pk: 'users#' + user,\n      sk: user,\n      userId: user,\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        userId: user,\n        lastLogin: this.utils.getDateTime(),\n        createdDate: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset(),\n        dismissedIntroSlides: true,\n        showIntroLink: true,\n        optInNewsletter: this.preferences.newsletter,\n        optInReminders: this.preferences.notifications,\n        optInAnalytics: this.preferences.analytics,\n        ageGroup: 0,\n        parentalStatus: []\n      }\n    };\n    this.utils.operatingSystem().then(async (os) => {\n      if (os !== 'ios') {\n        // await this.analytics.analyticsOptIn(this.preferences.analytics);\n      }\n    });\n    // return this.api.post('userData', userData);\n    return from(userData);\n  }\n  /**\n   * Update a user's last login\n   * @param user\n   * @private\n   */\n  private updateUserAtLogin(user: string) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        lastLogin: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset()\n      }\n    };\n    // this.analytics.analyticsOptIn(this.preferences.analytics).then();\n    return this.updateUserProfile(userData);\n  }\n  public updateUserPreferences(user: string, preferences: any) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        ageGroup: preferences.ageGroup,\n        parentalStatus: preferences.parentalStatus\n      }\n    }\n    return this.updateUserProfile(userData);\n  }\n  /**\n   * Delete the user record in DynamoDB\n   * Then delete the Cognito user and kill the session\n   * Finally redirect to login page.\n   */\n  public deleteUserAccount() {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        this.sub = user;\n        return this.deleteUserProfile(user);\n      }),\n      concatMap(() => {\n        this.preferences.newsletter = false;\n        this.preferences.analytics = false;\n        this.preferences.notifications = false;\n        return this.logDeleteRequest(this.sub);\n      }),\n      concatMap(() => {\n        return this.auth.deleteUser();\n      }),\n      map(() => {\n        this.router.navigateByUrl('/');\n      })\n    )\n  }\n\n  /**\n   * set help content as viewed so only appears on first view.\n   * @param fieldName\n   */\n  public setHelpViewed(fieldName: any) {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        const body = {\n          pk: 'users#' + user,\n          sk: user,\n          userId: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            [fieldName]: true\n          }\n        }\n        return this.updateUserProfile(body);\n      })\n    )\n  }\n\n  /**\n   * Intro banner on homepage. If dismissed save to user so not shown again\n   * @param state\n   */\n  showIntro(state: boolean) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            showIntroLink: state\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n}\n","import { HttpInterceptorFn } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { AuthService } from './services/auth.service';\nimport { Observable, from } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nexport const authInterceptor: HttpInterceptorFn = (request, next): Observable<any> => {\n  const authService = inject(AuthService); // Use `inject()` instead of constructor injection\n  const noAuthRequests = [\n    'introSlides',\n    'introSlides2'\n  ]; // Example excluded requests\n\n  const requestPath: string = request.url.substring(request.url.lastIndexOf('/') + 1);\n  if (!noAuthRequests.includes(requestPath)) {\n    return from(authService.getIDToken()).pipe(\n      switchMap((token) => {\n        const reqClone = request.clone({\n          setHeaders: {\n            Authorization: `${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        return next(reqClone);\n      })\n    );\n  } else {\n    const reqClone = request.clone({\n      setHeaders: {\n        'Content-Type': 'application/json',\n      },\n    });\n    return next(reqClone);\n  }\n};\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","import {Inject, Injectable} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\nimport {from, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {environment} from '../../environments/environment';\nimport {Browser} from '@capacitor/browser';\nimport {App} from '@capacitor/app';\nimport {Capacitor} from '@capacitor/core';\nimport {\n  confirmSignIn,\n  deleteUser,\n  fetchAuthSession,\n  fetchUserAttributes,\n  getCurrentUser,\n  signIn,\n  signOut,\n  signUp,\n  signInWithRedirect\n} from '@aws-amplify/auth';\nimport {AuthProvider} from '@aws-amplify/auth/dist/esm/types/inputs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // Get access to window object in the Angular way\n  private window: Window;\n  constructor(\n      @Inject(DOCUMENT) private document: Document,\n  ) {\n    this.window = this.document.defaultView;\n  }\n  async socialSignIn(identityProvider: AuthProvider) {\n    try {\n      console.log(' STARTING SOCIAL SIGN-IN');\n      console.log(' Provider:', identityProvider);\n      console.log(' Platform info:', {\n        isNative: Capacitor.isNativePlatform(),\n        platform: Capacitor.getPlatform(),\n        hostname: this.window?.location?.hostname,\n        production: environment.production\n      });\n\n      // Get the current Amplify configuration to debug\n      const { Amplify } = await import('aws-amplify');\n      const currentConfig = Amplify.getConfig();\n      console.log(' Current Amplify config redirects:', {\n        signIn: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignIn,\n        signOut: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignOut\n      });\n\n      // Use Amplify's configured redirect URIs (which are set in main.ts based on environment)\n      console.log(' Attempting Amplify signInWithRedirect...');\n\n      // Log the exact parameters being passed to signInWithRedirect\n      const signInParams = { provider: identityProvider };\n      console.log(' SignInWithRedirect parameters:', JSON.stringify(signInParams, null, 2));\n\n      await signInWithRedirect(signInParams);\n      console.log(' Amplify signInWithRedirect initiated successfully');\n\n    } catch (error: any) {\n      console.error(' ERROR during social sign-in:', error);\n      console.error(' Error details:', {\n        name: error.name,\n        message: error.message,\n        code: error.code,\n        stack: error.stack,\n        toString: error.toString(),\n        fullError: JSON.stringify(error, null, 2)\n      });\n      console.error(' Error prototype chain:', {\n        constructor: error.constructor.name,\n        prototype: Object.getPrototypeOf(error),\n        ownProperties: Object.getOwnPropertyNames(error),\n        allKeys: Object.keys(error)\n      });\n\n      // Log the full error object structure\n      console.error(' Complete error analysis:');\n      for (const key in error) {\n        console.error(` error.${key}:`, error[key]);\n      }\n\n      // Provide user-friendly error messages based on error type\n      let userMessage = 'Authentication failed. ';\n\n      if (error.message?.includes('InvalidOriginException') || error.message?.includes('redirect')) {\n        userMessage += 'Please ensure the redirect URLs are configured correctly in AWS Cognito.';\n        console.error(' This appears to be a redirect URL configuration error in AWS Cognito');\n      } else if (error.message?.includes('provider')) {\n        userMessage += 'The OAuth provider configuration is incorrect.';\n        console.error(' This appears to be a provider configuration error');\n      } else if (error.message?.includes('NetworkError')) {\n        userMessage += 'Network connection failed. Please check your internet connection.';\n      } else {\n        userMessage += 'An unexpected error occurred. Please try again.';\n      }\n\n      // Show a cleaner user-facing alert\n      alert(`Authentication Error\\n\\n${userMessage}`);\n\n      throw new Error(userMessage);\n    }\n  }\n\n  private async handleMobileSocialLogin(provider: AuthProvider) {\n    try {\n      console.log('Handling mobile social login for:', provider);\n\n      // Build the OAuth URL manually for mobile - use localhost redirect for in-app browser\n      const authUrl = `https://${environment.awsConfig.cognitoDomain}/oauth2/authorize?` +\n        `client_id=${environment.awsConfig.userPoolClientId}&` +\n        `response_type=code&` +\n        `scope=email+openid+profile&` +\n        `redirect_uri=http://localhost:8100&` +\n        `identity_provider=${provider}`;\n\n      console.log('Opening OAuth URL in browser:', authUrl);\n      alert(`Opening ${provider} OAuth login in in-app browser`);\n\n      // Try using window.open instead of Browser plugin\n      if (this.window) {\n        console.log('Using window.open for OAuth URL');\n        this.window.open(authUrl, '_blank', 'location=yes,hidden=no,closebuttoncaption=Done');\n      } else {\n        console.log('Fallback to Browser plugin');\n        await Browser.open({\n          url: authUrl,\n          windowName: '_blank',\n        });\n      }\n\n      console.log('Browser opened successfully');\n\n      // Set up listener for the deep link callback\n      this.setupDeepLinkListener();\n\n      // Also listen for browser navigation changes\n      this.setupBrowserListener();\n\n    } catch (error) {\n      console.error('Error in mobile social login:', error);\n      throw error;\n    }\n  }\n\n  private setupDeepLinkListener() {\n    // Deep link handling is now centralized in main.ts\n    // This method is no longer needed but kept for backwards compatibility\n    console.log('Deep link listener setup (now handled in main.ts)');\n  }\n\n  private setupBrowserListener() {\n    console.log('Setting up browser listener');\n\n    Browser.addListener('browserFinished', () => {\n      console.log('Browser closed');\n    });\n\n    Browser.addListener('browserPageLoaded', () => {\n      console.log('Browser page loaded');\n    });\n  }\n\n  private async processAuthCallback(url: string) {\n    try {\n      console.log('Processing auth callback URL:', url);\n\n      // Extract the authorization code from the URL\n      const urlParams = new URLSearchParams(url.split('?')[1]);\n      const code = urlParams.get('code');\n\n      if (code) {\n        console.log('Authorization code received:', code);\n        // Here you would normally exchange the code for tokens\n        // For now, let's redirect to home page\n        alert('OAuth callback received! Code: ' + code);\n        // You can implement token exchange here or let Amplify handle it\n      } else {\n        console.error('No authorization code found in callback URL');\n        alert('OAuth callback error: No authorization code found');\n      }\n    } catch (error) {\n      console.error('Error processing auth callback:', error);\n      alert('Error processing OAuth callback: ' + error);\n    }\n  }\n  // Get temporary access keys from the Identity Pool\n  public async getAccessKeys(): Promise<any> {\n    const authSession = await fetchAuthSession();\n    return authSession.credentials;\n  }\n  // Get Cognito username\n  public getUserSub(): Observable<any> {\n    return from(getCurrentUser()).pipe(\n      map(authUser => (authUser.userId))\n    );\n  }\n  // Get Cognito user attributes - observable\n  public getUserAttributes() {\n    return from(fetchUserAttributes()).pipe(\n      map(attributes => (attributes))\n    );\n  }\n  // Get Cognito user email - observable\n  public getUserEmail() {\n    return from(fetchUserAttributes()).pipe(\n      map(attributes => (attributes.email))\n    );\n  }\n  // Get Cognito user attributes - promise\n  public async getUserAttributesPromise() {\n    return await fetchUserAttributes();\n  }\n  public async signUp(email: string): Promise<boolean> {\n    try {\n      const {isSignUpComplete, userId, nextStep} = await signUp({\n        username: email,\n        password: this.getRandomString(30),\n        options: {\n          userAttributes: {\n            email\n          }\n        }\n      });\n      return isSignUpComplete;\n    } catch (error) {\n      if (error.name === 'UserLambdaValidationException') {\n        // Throw the cleaned-up error instead of just returning the message\n        throw new Error(error.message.replace(/^PreSignUp failed with error\\s*/, ''));\n      }\n      throw error;\n    }\n  }\n  public async signIn(email: string) {\n    try {\n      const { isSignedIn, nextStep } = await signIn({\n        username: email,\n        options: {\n          authFlowType: 'CUSTOM_WITHOUT_SRP'\n        }\n      });\n      if (nextStep.signInStep === 'CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE') {\n        return isSignedIn;\n      }\n    } catch(error: any) {\n\t\t\tconsole.error('error signing in', error);\n      return error;\n    }\n  }\n  public async signOut() {\n\t\ttry {\n\t\t\t// Import isPlatform to detect mobile\n\t\t\tconst { isPlatform } = await import('@ionic/angular');\n\n\t\t\tif (isPlatform('capacitor')) {\n\t\t\t\t// Mobile logout - clear session manually to avoid browser redirects\n\t\t\t\tconsole.log(' Performing mobile logout...');\n\t\t\t\tawait this.clearSessionManually();\n\t\t\t} else {\n\t\t\t\t// Web logout - use standard Amplify signOut\n\t\t\t\tconsole.log(' Performing web logout...');\n\t\t\t\tawait signOut();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('error signing out: ', error);\n\t\t}\n  }\n\n  private async clearSessionManually() {\n\t\ttry {\n\t\t\t// Clear all authentication-related storage\n\t\t\tconsole.log(' Manually clearing authentication session...');\n\n\t\t\t// Try Amplify signOut first to clear internal state\n\t\t\ttry {\n\t\t\t\tawait signOut();\n\t\t\t\tconsole.log(' Amplify signOut successful');\n\t\t\t} catch (amplifyError) {\n\t\t\t\tconsole.log(' Amplify signOut failed, continuing with manual cleanup:', amplifyError);\n\t\t\t}\n\n\t\t\t// Clear ALL localStorage (aggressive approach)\n\t\t\tif (this.window?.localStorage) {\n\t\t\t\tconst allKeys = [];\n\t\t\t\tfor (let i = 0; i < this.window.localStorage.length; i++) {\n\t\t\t\t\tconst key = this.window.localStorage.key(i);\n\t\t\t\t\tif (key) {\n\t\t\t\t\t\tallKeys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.log(' Clearing localStorage keys:', allKeys);\n\t\t\t\tallKeys.forEach(key => this.window.localStorage.removeItem(key));\n\t\t\t}\n\n\t\t\t// Clear ALL sessionStorage\n\t\t\tif (this.window?.sessionStorage) {\n\t\t\t\tconst allKeys = [];\n\t\t\t\tfor (let i = 0; i < this.window.sessionStorage.length; i++) {\n\t\t\t\t\tconst key = this.window.sessionStorage.key(i);\n\t\t\t\t\tif (key) {\n\t\t\t\t\t\tallKeys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconsole.log(' Clearing sessionStorage keys:', allKeys);\n\t\t\t\tallKeys.forEach(key => this.window.sessionStorage.removeItem(key));\n\t\t\t}\n\n\t\t\t// Clear cookies related to auth\n\t\t\tif (this.document?.cookie) {\n\t\t\t\tconst cookies = this.document.cookie.split(';');\n\t\t\t\tcookies.forEach(cookie => {\n\t\t\t\t\tconst [name] = cookie.split('=');\n\t\t\t\t\tif (name && (name.includes('amplify') || name.includes('cognito') || name.includes('auth'))) {\n\t\t\t\t\t\tthis.document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Force refresh Amplify configuration\n\t\t\ttry {\n\t\t\t\tconst { Amplify } = await import('aws-amplify');\n\t\t\t\tconsole.log(' Clearing Amplify internal state...');\n\t\t\t\t// This will clear any cached auth state\n\t\t\t\tawait Amplify.configure(Amplify.getConfig());\n\t\t\t} catch (configError) {\n\t\t\t\tconsole.log(' Error refreshing Amplify config:', configError);\n\t\t\t}\n\n\t\t\tconsole.log(' Session cleared manually');\n\n\t\t} catch (error) {\n\t\t\tconsole.error(' Error clearing session manually:', error);\n\t\t}\n  }\n  public async answerCustomChallenge(answer: string) {\n    // @ts-ignore\n\t\ttry {\n      const {\n        isSignedIn,\n        nextStep\n      } = await confirmSignIn({ challengeResponse: answer });\n      if (isSignedIn) {\n\t\t\t\t// login successful\n        return 'isSignedIn';\n      }\n      if ('additionalInfo' in nextStep) {\n\t\t\t\t// login failed, present the nextStep feedback (how many attempts left etc).\n\t\t\t\treturn nextStep.additionalInfo;\n      }\n    } catch (error: any) {\n      if (error.name.includes('SignInException')) {\n        return 'There was an issue, try again or return to login.';\n      }\n      if (error.name.includes('EmptyChallengeResponse')) {\n        return 'Please enter the code you were emailed';\n      }\n      return 'There was an issue, please login again.';\n\t\t}\n  }\n  private fetchAuthSession() {\n    const getSession = async () => {\n      const {\n        tokens,\n        credentials,\n        identityId,\n        userSub\n      } = await fetchAuthSession();\n\n      const {\n        idToken,\n        accessToken\n      } = tokens;\n      return idToken;\n    }\n    return getSession();\n  }\n  // returns a boolean based on auth state\n  public async isAuthenticated() {\n    try {\n      console.log(' Checking authentication status...');\n\n      // Try to get the current session\n      const session = await fetchAuthSession();\n\n      if (session.tokens?.idToken) {\n        console.log(' Valid session found with ID token');\n\n        // Double-check by getting current user\n        try {\n          const user = await getCurrentUser();\n          console.log(' Current user confirmed:', user.userId);\n          return true;\n        } catch (userErr) {\n          console.log(' Session exists but user not available:', userErr);\n          return false;\n        }\n      }\n\n      console.log(' No valid session tokens found');\n      return false;\n    } catch (err) {\n      console.log(' Authentication check failed:', err);\n      return false;\n    }\n  }\n  // Get ID Token to make API calls when Cognito authentication is enabled on API Gateway\n  public async getIDToken() {\n      return await this.fetchAuthSession().then((result) => {\n        return result;\n      });\n  }\n  async deleteUser() {\n    return await deleteUser();\n  }\n  // Generate a password to create user but never used as we have a custom auth challenge setup in Cognito\n  private getRandomString(bytes: number) {\n    const randomValues = new Uint8Array(bytes);\n    this.window.crypto.getRandomValues(randomValues);\n    return Array.from(randomValues).map(this.intToHex).join('');\n  }\n  private intToHex(nr: number) {\n    return nr.toString(16).padStart(2, '0');\n  }\n}\n","export const environment = {\n  production: false,\n  cdn: '',\n  imgCdn: '',\n  apiGateway: '',\n  apiGatewayStage: '',\n  subscriptionsIOSAPIKey: '',\n  subscriptionsAndroidAPIKey: '',\n  awsConfig: {\n    region: 'eu-north-1',\n    cognitoDomain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n    userPoolId: 'eu-north-1_bZzl2ybtS',\n    userPoolClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    userPoolWebClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    identityPoolId: 'eu-north-1:e4a55099-41fe-4984-9c09-849a07a26f04',\n    oauth: {\n      domain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n      scope: ['email', 'openid', 'profile'],\n      redirectSignIn: 'tensilapp://callback',\n      redirectSignOut: 'tensilapp://callback',\n      responseType: 'code'\n    }\n  },\n  firebaseConfig: {\n    apiKey: '',\n    authDomain: '',\n    databaseURL: '',\n    projectId: '',\n    storageBucket: '',\n    messagingSenderId: '',\n    appId: '',\n    measurementId: ''\n  }\n};\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 54140;\nmodule.exports = webpackEmptyAsyncContext;","import { Preferences } from '@capacitor/preferences';\nimport { KeyValueStorageInterface } from '@aws-amplify/core';\n\n/**\n * Custom storage adapter for AWS Amplify that uses Capacitor Preferences\n * This ensures proper session persistence on mobile devices\n */\nexport class CapacitorStorage implements KeyValueStorageInterface {\n  async setItem(key: string, value: string): Promise<void> {\n    try {\n      await Preferences.set({ key, value });\n      console.log(' Storage SET:', key, `(${value.length} chars)`);\n    } catch (error) {\n      console.error(' Storage SET failed:', key, error);\n      throw error;\n    }\n  }\n\n  async getItem(key: string): Promise<string | null> {\n    try {\n      const { value } = await Preferences.get({ key });\n      console.log(' Storage GET:', key, value ? `found (${value.length} chars)` : 'not found');\n      return value;\n    } catch (error) {\n      console.error(' Storage GET failed:', key, error);\n      return null;\n    }\n  }\n\n  async removeItem(key: string): Promise<void> {\n    try {\n      await Preferences.remove({ key });\n      console.log(' Storage REMOVE:', key);\n    } catch (error) {\n      console.error(' Storage REMOVE failed:', key, error);\n    }\n  }\n\n  async clear(): Promise<void> {\n    try {\n      await Preferences.clear();\n      console.log(' Storage CLEAR: all items removed');\n    } catch (error) {\n      console.error(' Storage CLEAR failed:', error);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { AuthService } from './services/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/account/login']);\n    return false;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsNotAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (!await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/home']);\n    return false;\n  }\n}\n","import \"aws-amplify/auth/enable-oauth-listener\";\nimport { enableProdMode, importProvidersFrom } from \"@angular/core\";\nimport { environment } from \"./environments/environment\";\nimport { Amplify } from \"aws-amplify\";\nimport { cognitoUserPoolsTokenProvider } from \"@aws-amplify/auth/cognito\";\nimport { bootstrapApplication } from \"@angular/platform-browser\";\nimport { AppComponent } from \"./app/app.component\";\nimport { provideHttpClient, withInterceptors } from \"@angular/common/http\";\nimport { IonicModule, isPlatform } from \"@ionic/angular\";\nimport { provideRouter, withHashLocation } from \"@angular/router\";\nimport { routes } from \"./app/app-routing.module\";\nimport { authInterceptor } from \"./app/auth.interceptor\";\nimport { provideLottieOptions } from \"ngx-lottie\";\nimport { IonicStorageModule } from \"@ionic/storage-angular\";\nimport { register } from \"swiper/element/bundle\";\nimport { Hub } from \"aws-amplify/utils\";\nimport { Router } from \"@angular/router\";\nimport { Capacitor } from \"@capacitor/core\";\nimport { CapacitorStorage } from \"./app/utils/capacitor-storage\";\nregister();\n\n// Player factory method for lottie-web\nexport function playerFactory() {\n  return import(\"lottie-web\");\n}\n\nif (environment.production) {\n  enableProdMode();\n}\nconst mobileRedirect = \"capacitor://callback\";\nconst mobileSignOut = \"capacitor://callback\";\nconst capacitorRedirect = \"capacitor://localhost/callback\";\nconst capacitorCallback = \"capacitor://callback\";\nconst capacitorSignOut = \"capacitor://callback\";\nconst capacitorCallbackSignOut = \"capacitor://callback\";\nconst webRedirectDev = \"http://localhost:8100/callback\";\nconst webSignOutDev = \"http://localhost:8100\";\nconst webRedirectProd = \"https://cognito-capacitor-login.vercel.app/callback\";\nconst webSignOutProd = \"https://cognito-capacitor-login.vercel.app\";\n\n// Determine if we're in development or production web mode\nconst isLocalDev =\n  !environment.production &&\n  !isPlatform(\"capacitor\") &&\n  (window.location.hostname === \"localhost\" ||\n    window.location.hostname === \"127.0.0.1\");\n\nconst webRedirect = isLocalDev ? webRedirectDev : webRedirectProd;\nconst webSignOut = isLocalDev ? webSignOutDev : webSignOutProd;\n\n// Configure custom storage for Capacitor apps BEFORE Amplify.configure\nif (isPlatform(\"capacitor\")) {\n  const capacitorStorage = new CapacitorStorage();\n  cognitoUserPoolsTokenProvider.setKeyValueStorage(capacitorStorage);\n  console.log(\" Capacitor storage configured for Amplify Auth\");\n}\n\nAmplify.configure({\n  Auth: {\n    Cognito: {\n      userPoolId: environment.awsConfig.userPoolId,\n      userPoolClientId: environment.awsConfig.userPoolClientId,\n      identityPoolId: environment.awsConfig.identityPoolId,\n      loginWith: {\n        oauth: {\n          domain: environment.awsConfig.cognitoDomain,\n          redirectSignIn: isPlatform(\"capacitor\")\n            ? [capacitorRedirect, capacitorCallback, mobileRedirect]\n            : [webRedirect],\n          redirectSignOut: isPlatform(\"capacitor\")\n            ? [capacitorSignOut, capacitorCallbackSignOut, mobileSignOut]\n            : [webSignOut],\n          responseType: \"code\",\n          scopes: [\"email\", \"openid\", \"profile\"],\n        },\n      },\n    },\n  },\n});\n\n// Debug configuration\nconsole.log(\" AWS Amplify Configuration:\", {\n  userPoolId: environment.awsConfig.userPoolId,\n  userPoolClientId: environment.awsConfig.userPoolClientId,\n  identityPoolId: environment.awsConfig.identityPoolId,\n  cognitoDomain: environment.awsConfig.cognitoDomain,\n  platform: isPlatform(\"capacitor\") ? \"capacitor\" : \"web\",\n  isLocalDev: isLocalDev,\n  hostname: window.location.hostname,\n  usingCapacitorStorage: isPlatform(\"capacitor\"),\n  redirectSignIn: isPlatform(\"capacitor\")\n    ? [capacitorRedirect, capacitorCallback, mobileRedirect]\n    : [webRedirect],\n  redirectSignOut: isPlatform(\"capacitor\")\n    ? [capacitorSignOut, capacitorCallbackSignOut, mobileSignOut]\n    : [webSignOut],\n});\n\nconst currentConfig = Amplify.getConfig();\nconsole.log(\" Final Amplify Config:\", currentConfig);\nconsole.log(\" OAuth Configuration Details:\", {\n  oauthConfig: currentConfig.Auth?.Cognito?.loginWith?.oauth,\n  redirectArrays: {\n    signIn: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignIn,\n    signOut: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignOut,\n  },\n  scopes: currentConfig.Auth?.Cognito?.loginWith?.oauth?.scopes,\n  responseType: currentConfig.Auth?.Cognito?.loginWith?.oauth?.responseType,\n});\n\nHub.listen(\"auth\", async ({ payload }) => {\n  console.log(\" Auth Hub Event:\", {\n    event: payload.event,\n    data: (payload as any).data,\n    fullPayload: payload,\n  });\n\n  switch (payload.event) {\n    case \"signInWithRedirect\":\n      console.log(\" signInWithRedirect SUCCESS - navigating to home\");\n      // Give Angular time to bootstrap if needed\n      setTimeout(async () => {\n        const router = (window as any).ng?.getInjector()?.get(Router);\n        if (router) {\n          console.log(\" Router found, navigating to /home\");\n          await router.navigate([\"/home\"]);\n        } else {\n          console.error(\" Router not found, attempting manual navigation\");\n          window.location.href = window.location.origin + \"/home\";\n        }\n      }, 500);\n      break;\n    case \"signInWithRedirect_failure\":\n      console.error(\" signInWithRedirect FAILED:\", {\n        error: (payload as any).data,\n        errorType: typeof (payload as any).data,\n        errorKeys: (payload as any).data\n          ? Object.keys((payload as any).data)\n          : \"no keys\",\n        fullError: JSON.stringify((payload as any).data, null, 2),\n      });\n      break;\n    case \"customOAuthState\":\n      console.log(\" customOAuthState received:\", (payload as any).data);\n      const state = (payload as any).data; // this will be customState provided on signInWithRedirect function\n      break;\n    default:\n      console.log(\" Unhandled auth event:\", payload.event);\n      break;\n  }\n});\n\n// Set up deep link handling for mobile apps\nif (Capacitor.isNativePlatform()) {\n  import(\"@capacitor/app\").then(({ App }) => {\n    App.addListener(\"appUrlOpen\", async (data: any) => {\n      console.log(\" Deep link received:\", data.url);\n\n      // Check if this is an OAuth callback (custom scheme or Universal Link)\n      if (\n        data.url.includes(\"tensilapp://callback\") ||\n        data.url.includes(\"capacitor://localhost/callback\") ||\n        data.url.includes(\"capacitor://callback\") ||\n        data.url.includes(\"https://cognito-capacitor-login.vercel.app/callback\")\n      ) {\n        console.log(\" OAuth callback detected, processing...\");\n\n        // Extract query parameters from the URL\n        try {\n          const url = new URL(data.url);\n          const code = url.searchParams.get(\"code\");\n          const state = url.searchParams.get(\"state\");\n          const error = url.searchParams.get(\"error\");\n\n          console.log(\" OAuth callback details:\", {\n            code: code ? \"present\" : \"missing\",\n            state: state ? \"present\" : \"missing\",\n            error: error || \"none\"\n          });\n\n          if (error) {\n            console.error(\" OAuth error:\", error);\n            const router = (window as any).ng?.getInjector()?.get(Router);\n            router?.navigate([\"/account/signup\"], { queryParams: { error } });\n            return;\n          }\n\n          if (code) {\n            console.log(\" OAuth code received, updating window.location for Amplify OAuth listener...\");\n            console.log(\" Original deep link URL:\", data.url);\n\n            // Convert deep link URL to web URL format that Amplify's OAuth listener expects\n            // Amplify's OAuth listener monitors window.location changes\n            const newUrl = `${window.location.origin}${window.location.pathname}?code=${encodeURIComponent(code)}${state ? `&state=${encodeURIComponent(state)}` : ''}`;\n\n            console.log(\" Setting window.location.href to:\", newUrl);\n\n            // This will trigger a page reload with the OAuth code in the URL\n            // Amplify's OAuth listener (imported at top of file) will process it\n            window.location.href = newUrl;\n          }\n        } catch (err) {\n          console.error(\" Error processing deep link:\", err);\n        }\n      }\n    });\n  });\n}\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideHttpClient(withInterceptors([authInterceptor])),\n    importProvidersFrom(IonicModule.forRoot(), IonicStorageModule.forRoot()),\n    provideLottieOptions({\n      player: playerFactory,\n    }),\n    // Use hash routing only for mobile (Capacitor) to avoid file:// protocol issues\n    // Use regular routing for web to support Universal Links and OAuth callbacks\n    provideRouter(\n      routes,\n      ...(isPlatform(\"capacitor\") ? [withHashLocation()] : [])\n    ),\n  ],\n}).catch((err) => console.error(err));\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t37518,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js\"\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t41981,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-action-sheet_entry_js\"\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t71603,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-alert_entry_js\"\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t82273,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-app_8_entry_js\"\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t19642,\n\t\t\"node_modules_ionic_core_dist_esm_ion-avatar_3_entry_js\"\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t32095,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-back-button_entry_js\"\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t72335,\n\t\t\"node_modules_ionic_core_dist_esm_ion-backdrop_entry_js\"\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t78221,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-breadcrumb_2_entry_js\"\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t47184,\n\t\t\"node_modules_ionic_core_dist_esm_ion-button_2_entry_js\"\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t38759,\n\t\t\"node_modules_ionic_core_dist_esm_ion-card_5_entry_js\"\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t24248,\n\t\t\"node_modules_ionic_core_dist_esm_ion-checkbox_entry_js\"\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t69863,\n\t\t\"node_modules_ionic_core_dist_esm_ion-chip_entry_js\"\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t51769,\n\t\t\"node_modules_ionic_core_dist_esm_ion-col_3_entry_js\"\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t2569,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime-button_entry_js\"\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t76534,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime_3_entry_js\"\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t25458,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-fab_3_entry_js\"\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t70654,\n\t\t\"node_modules_ionic_core_dist_esm_ion-img_entry_js\"\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t36034,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js\"\n\t],\n\t\"./ion-input-password-toggle.entry.js\": [\n\t\t5196,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input-password-toggle_entry_js\"\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t20761,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input_entry_js\"\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t6492,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item-option_3_entry_js\"\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t29557,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item_8_entry_js\"\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t68353,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-loading_entry_js\"\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t51024,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-menu_3_entry_js\"\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t29160,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-modal_entry_js\"\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t60393,\n\t\t\"node_modules_ionic_core_dist_esm_ion-nav_2_entry_js\"\n\t],\n\t\"./ion-picker-column-option.entry.js\": [\n\t\t68442,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column-option_entry_js\"\n\t],\n\t\"./ion-picker-column.entry.js\": [\n\t\t43110,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column_entry_js\"\n\t],\n\t\"./ion-picker.entry.js\": [\n\t\t15575,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker_entry_js\"\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t16772,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-popover_entry_js\"\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t34810,\n\t\t\"node_modules_ionic_core_dist_esm_ion-progress-bar_entry_js\"\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t14639,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-radio_2_entry_js\"\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t90628,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-range_entry_js\"\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t10852,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-refresher_2_entry_js\"\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t61479,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js\"\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t24065,\n\t\t\"node_modules_ionic_core_dist_esm_ion-ripple-effect_entry_js\"\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t57971,\n\t\t\"node_modules_ionic_core_dist_esm_ion-route_4_entry_js\"\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t93184,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-searchbar_entry_js\"\n\t],\n\t\"./ion-segment-content.entry.js\": [\n\t\t94312,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-content_entry_js\"\n\t],\n\t\"./ion-segment-view.entry.js\": [\n\t\t54540,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-view_entry_js\"\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t469,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment_2_entry_js\"\n\t],\n\t\"./ion-select-modal.entry.js\": [\n\t\t57101,\n\t\t\"node_modules_ionic_core_dist_esm_ion-select-modal_entry_js\"\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t78471,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-select_3_entry_js\"\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t40388,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-spinner_entry_js\"\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t42392,\n\t\t\"node_modules_ionic_core_dist_esm_ion-split-pane_entry_js\"\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t36059,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab-bar_2_entry_js\"\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t5427,\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab_2_entry_js\"\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t50198,\n\t\t\"node_modules_ionic_core_dist_esm_ion-text_entry_js\"\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t1735,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-textarea_entry_js\"\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t7510,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toast_entry_js\"\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t45297,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toggle_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 88996;\nmodule.exports = webpackAsyncContext;","import { NgModule } from '@angular/core';\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\nimport {IsAuthenticated} from './auth.guard';\n\nexport const routes: Routes = [\n  // INTRO\n  {\n    path: '',\n    loadComponent: () => import('./pages/intro/intro.page').then( c => c.IntroPage),\n  },\n  // HOME\n  {\n    path: 'home',\n    loadComponent: () => import('./pages/home/home.page').then(c => c.HomePage),\n    canActivate: [IsAuthenticated]\n  },\n  // ACCOUNT PAGES\n  {\n    path: 'account',\n    loadChildren: () => import('./pages/account/account-routing.module').then(m => m.AccountRoutingModule),\n  },\n  {\n    path: 'callback',\n    loadComponent: () => import('./pages/account/callback/callback.component').then( c => c.CallbackComponent),\n  },\n  // 404 page\n  {\n    path: '**',\n    loadComponent: () => import('./pages/intro/intro.page').then( c => c.IntroPage),\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules }),\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n"],"names":["Component","Router","NavigationEnd","filter","UserService","UtilityService","IonicModule","EdgeToEdge","StatusBar","Style","AppComponent","router","userSrv","utils","constructor","handleOAuthCallback","_this","_asyncToGenerator","urlParams","URLSearchParams","window","location","search","code","get","state","console","log","getCurrentUser","Promise","resolve","setTimeout","user","navigate","error","ngOnInit","_this2","enable","setBackgroundColor","color","setStyle","style","Light","operatingSystem","then","os","watchRoutes","events","pipe","event","subscribe","navigationEndEvent","__decorate","selector","template","__NG_CLI_RESOURCE__0","imports","standalone","Injectable","Device","getTimezoneOffset","Date","getDateTime","toISOString","slice","getDate","getFutureDate","days","date","setDate","getFutureDateYYYYMMDD","timestamp","getPastDate","getWeekNumber","dt","type","firstDayOfYear","getFullYear","startOfYearWeek","getDay","startOfCurrentWeek","msInWeek","weekNum","Math","floor","getTime","toString","getMonday","d","day","diff","mon","months","getMonth","month","monthL","monthS","dayL","dayS","getFirstDayOfWeek","week","y","dayMs","offSetTimeStart","w","n1","n2","dateFrom","dateTo","timestampToMysqlDate","year","String","padStart","hours","getHours","minutes","getMinutes","seconds","getSeconds","pagination","content","start","end","result","map","i","push","getRandomList","array","numberRequired","taken","length","RangeError","currentAmount","randomInt","random","includes","removeDuplicates","originalArray","field","newArray","lookupObject","x","Object","keys","videoFormat","video","document","createElement","format","Boolean","canPlayType","groupBy","objectArray","property","reduce","acc","obj","key","deviceInfo","getInfo","deviceInformation","providedIn","AuthService","concatMap","from","environment","PushNotifications","Capacitor","auth","sub","cdn","userAttributes","userData","preferences","newsletter","analytics","notifications","pushListener","getUserData","updateUserProfile","body","deleteUserProfile","logDeleteRequest","pk","sk","createdDate","updatedDate","dataMap","requestDate","userId","newsletterSubscription","getUserAttributes","getUserProfile","subscribed","avatar","avatarId","request","email","emailBlacklisted","optInNewsletter","setNotification","notification","getUserSub","status","pushSubscription","section","optInReminders","reject","isNativePlatform","requestPermissions","receive","register","catch","updateUserPushSub","next","err","unregister","addListener","token","value","updateUser","createUser","updateUserAtLogin","fcmToken","timezoneOffset","lastLogin","dismissedIntroSlides","showIntroLink","optInAnalytics","ageGroup","parentalStatus","_ref","_x","apply","arguments","updateUserPreferences","deleteUserAccount","deleteUser","navigateByUrl","setHelpViewed","fieldName","showIntro","inject","switchMap","authInterceptor","authService","noAuthRequests","requestPath","url","substring","lastIndexOf","getIDToken","reqClone","clone","setHeaders","Authorization","Inject","DOCUMENT","Browser","confirmSignIn","fetchAuthSession","fetchUserAttributes","signIn","signOut","signUp","signInWithRedirect","defaultView","socialSignIn","identityProvider","isNative","platform","getPlatform","hostname","production","Amplify","currentConfig","getConfig","Auth","Cognito","loginWith","oauth","redirectSignIn","redirectSignOut","signInParams","provider","JSON","stringify","name","message","stack","fullError","prototype","getPrototypeOf","ownProperties","getOwnPropertyNames","allKeys","userMessage","alert","Error","handleMobileSocialLogin","authUrl","awsConfig","cognitoDomain","userPoolClientId","open","windowName","setupDeepLinkListener","setupBrowserListener","processAuthCallback","split","getAccessKeys","authSession","credentials","authUser","attributes","getUserEmail","getUserAttributesPromise","_this3","isSignUpComplete","nextStep","username","password","getRandomString","options","replace","isSignedIn","authFlowType","signInStep","_this4","isPlatform","clearSessionManually","_this5","amplifyError","localStorage","forEach","removeItem","sessionStorage","cookie","cookies","configure","configError","answerCustomChallenge","answer","challengeResponse","additionalInfo","getSession","tokens","identityId","userSub","idToken","accessToken","isAuthenticated","session","userErr","_this6","bytes","randomValues","Uint8Array","crypto","getRandomValues","Array","intToHex","join","nr","args","Document","imgCdn","apiGateway","apiGatewayStage","subscriptionsIOSAPIKey","subscriptionsAndroidAPIKey","region","userPoolId","userPoolWebClientId","identityPoolId","domain","scope","responseType","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Preferences","CapacitorStorage","setItem","set","getItem","remove","clear","IsAuthenticated","canActivate","IsNotAuthenticated","enableProdMode","importProvidersFrom","cognitoUserPoolsTokenProvider","bootstrapApplication","provideHttpClient","withInterceptors","provideRouter","withHashLocation","routes","provideLottieOptions","IonicStorageModule","Hub","playerFactory","mobileRedirect","mobileSignOut","capacitorRedirect","capacitorCallback","capacitorSignOut","capacitorCallbackSignOut","webRedirectDev","webSignOutDev","webRedirectProd","webSignOutProd","isLocalDev","webRedirect","webSignOut","capacitorStorage","setKeyValueStorage","scopes","usingCapacitorStorage","oauthConfig","redirectArrays","listen","payload","data","fullPayload","ng","getInjector","href","origin","errorType","errorKeys","App","_ref3","URL","searchParams","queryParams","newUrl","pathname","encodeURIComponent","_x2","providers","forRoot","player","NgModule","PreloadAllModules","RouterModule","path","loadComponent","c","IntroPage","HomePage","loadChildren","m","AccountRoutingModule","CallbackComponent","AppRoutingModule","preloadingStrategy","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[7,11]}