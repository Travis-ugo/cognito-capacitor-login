{"version":3,"file":"main.js","mappings":"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AAC;UACtC,CAAC,MAAM,IAAIH,IAAI,EAAE;YACfN,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEK,IAAI,CAAC;YACzC;YACAmB,MAAM,CAACC,QAAQ,CAACmW,IAAI,GAAGP,IAAI,CAACpX,GAAG;UACjC;QACF,CAAC,CAAC,OAAO+M,GAAG,EAAE;UACZjN,OAAO,CAACS,KAAK,CAAC,6BAA6B,EAAEwM,GAAG,CAAC;QACnD;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AACA0I,gFAAoB,CAACtW,4DAAY,EAAE;EACjCyY,SAAS,EAAE,CACTlC,wEAAiB,CAACC,uEAAgB,CAAC,CAACpH,kEAAe,CAAC,CAAC,CAAC,EACtDiH,kEAAmB,CAAC1W,wDAAW,CAAC+Y,OAAO,EAAE,EAAE5B,uEAAkB,CAAC4B,OAAO,EAAE,CAAC,EACxE7B,iEAAoB,CAAC;IACnB8B,MAAM,EAAE3B;GACT,CAAC;EACF;EACA;EACAN,+DAAa,CACXE,2DAAM,EACN,IAAIH,0DAAU,CAAC,WAAW,CAAC,GAAG,CAACE,kEAAgB,EAAE,CAAC,GAAG,EAAE,CAAC,CACzD;CAEJ,CAAC,CAAClJ,KAAK,CAAEG,GAAG,IAAKjN,OAAO,CAACS,KAAK,CAACwM,GAAG,CAAC,CAAC,C;;;;;;;;;;ACxLrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;;;AC/PyC;AACiC;AACT;AAE1D,MAAMgJ,MAAM,GAAW;AAC5B;AACA;EACEmC,IAAI,EAAE,EAAE;EACRC,aAAa,EAAEA,CAAA,KAAM,+bAAkC,CAAC/V,IAAI,CAAEgW,CAAC,IAAIA,CAAC,CAACC,SAAS,CAAC;EAC/EhD,WAAW,EAAE,CAACC,2DAAkB;CACjC;AACD;AACA;EACE4C,IAAI,EAAE,MAAM;EACZC,aAAa,EAAEA,CAAA,KAAM,2bAAgC,CAAC/V,IAAI,CAACgW,CAAC,IAAIA,CAAC,CAACE,QAAQ,CAAC;EAC3EjD,WAAW,EAAE,CAACD,wDAAe;CAC9B;AACD;AACA;EACE8C,IAAI,EAAE,SAAS;EACfK,YAAY,EAAEA,CAAA,KAAM,2dAAgD,CAACnW,IAAI,CAACoW,CAAC,IAAIA,CAAC,CAACC,oBAAoB;CACtG,EACD;EACEP,IAAI,EAAE,UAAU;EAChBC,aAAa,EAAEA,CAAA,KAAM,qeAAqD,CAAC/V,IAAI,CAAEgW,CAAC,IAAIA,CAAC,CAACM,iBAAiB;CAC1G;AACD;AACA;EACER,IAAI,EAAE,IAAI;EACVS,UAAU,EAAE;CACb,CACF;AAQM,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB,GAAG;AAAnBA,gBAAgB,GAAAjW,iDAAA,EAN5BoV,uDAAQ,CAAC;EACRhV,OAAO,EAAE,CACPkV,yDAAY,CAACJ,OAAO,CAAC9B,MAAM,EAAE;IAAE8C,kBAAkB,EAAEb,8DAAiBA;EAAA,CAAE,CAAC,CACxE;EACDc,OAAO,EAAE,CAACb,yDAAY;CACvB,CAAC,C,EACWW,gBAAgB,CAAG","sources":["./src/app/app.component.ts","./src/app/services/utility.service.ts","./src/app/services/user.service.ts","./src/app/auth.interceptor.ts","./src/app/app.component.scss","./src/app/services/auth.service.ts","./src/environments/environment.ts","./node_modules/@stencil/core/internal/client/ lazy ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ strict namespace object","./src/app/auth.guard.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./src/app/app-routing.module.ts"],"sourcesContent":["import 'aws-amplify/auth/enable-oauth-listener';\nimport {Component, OnInit} from '@angular/core';\nimport {Router, NavigationEnd} from '@angular/router';\nimport {filter} from 'rxjs';\nimport {UserService} from './services/user.service';\nimport {UtilityService} from './services/utility.service';\nimport {IonicModule} from '@ionic/angular';\nimport {App} from '@capacitor/app';\nimport { EdgeToEdge } from '@capawesome/capacitor-android-edge-to-edge-support';\nimport { StatusBar, Style } from '@capacitor/status-bar';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.scss'],\n  imports: [IonicModule],\n  standalone: true\n})\nexport class AppComponent implements OnInit {\n  private REDIRECT_URI = 'tensilapp://callback';\n  constructor(\n    public router: Router,\n    private userSrv: UserService,\n    private utils: UtilityService,\n  ) {\n\n    App.addListener('appUrlOpen', async (event: {url: string}) => {\n      console.log(\"ðŸ”— Deep link received:\", event.url); \n      const incoming = event.url;\n      console.log('Deep link received:', incoming);\n\n      // Check if this is an OAuth callback\n      if (incoming.startsWith(this.REDIRECT_URI)) {\n        console.log('OAuth callback detected:', incoming);\n\n        try {\n          // Parse the URL to extract parameters\n          const url = new URL(incoming);\n          const code = url.searchParams.get('code');\n          const error = url.searchParams.get('error');\n\n          if (error) {\n            console.error('OAuth error:', error);\n            this.router.navigate(['/account/login']);\n            return;\n          }\n\n          if (code) {\n            console.log('OAuth code received:', code);\n\n            // Wait for Amplify to process the OAuth callback\n            await new Promise(resolve => setTimeout(resolve, 1000));\n\n            // Check if user is authenticated\n            const { getCurrentUser } = await import('@aws-amplify/auth');\n            try {\n              const user = await getCurrentUser();\n              console.log('User authenticated via deep link:', user);\n              // Let the router guards handle navigation based on auth state\n              this.router.navigate(['/']);\n            } catch (authError) {\n              console.error('Authentication failed after deep link:', authError);\n              this.router.navigate(['/account/login']);\n            }\n          }\n        } catch (parseError) {\n          console.error('Error parsing deep link URL:', parseError);\n          this.router.navigate(['/account/login']);\n        }\n      }\n    });\n  }\n\n  private async handleOAuthCallback() {\n    // Check if current URL contains OAuth callback parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const state = urlParams.get('state');\n\n    if (code && state) {\n      console.log('OAuth callback detected with code:', code);\n\n      try {\n        // Import Amplify auth functions\n        const { getCurrentUser } = await import('@aws-amplify/auth');\n\n        // Wait a moment for Amplify to process the OAuth callback\n        await new Promise(resolve => setTimeout(resolve, 2000));\n\n        // Check if user is now authenticated\n        const user = await getCurrentUser();\n        console.log('User authenticated:', user);\n\n        // Let the router guards handle navigation based on auth state\n        this.router.navigate(['/']);\n      } catch (error) {\n        console.error('Authentication failed:', error);\n        // If authentication failed, redirect to signup page\n        this.router.navigate(['/account/login']);\n      }\n    }\n  }\n\n  async ngOnInit() {\n    await EdgeToEdge.enable();\n    await EdgeToEdge.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setStyle({ style: Style.Light });\n\n    // Check if this is an OAuth callback URL\n    this.handleOAuthCallback();\n\n    try {\n      console.log('App initialized - RevenueCat ready');\n    } catch (error) {\n      console.error('Failed to initialize subscription service', error);\n    }\n\n    this.utils.operatingSystem().then((os) => {\n      if(os === 'ios') {\n        /*this.analyticsSrv.attGetStatus().then((optIn: boolean) => {\n          this.userSrv.preferences.analytics = optIn;\n          if (optIn) {\n            this.analyticsSrv.initFb().then(() => {\n              this.analyticsSrv.analyticsOptIn(optIn).then(() => this.watchRoutes()).catch((e) => console.error(e));\n            });\n          }\n        });*/\n      } else {\n        // not iOS - optIn handled from register/profile page, so initialise and set to false\n        /*this.analyticsSrv.initFb().then(() => {\n          this.analyticsSrv.analyticsOptIn(false).then(() => this.watchRoutes()).catch((e) => console.error(e));\n        });*/\n      }\n    });\n  }\n  watchRoutes() {\n    this.router.events.pipe(\n      filter(event => event instanceof NavigationEnd)\n    ).subscribe((event) => {\n      const navigationEndEvent = event as NavigationEnd;\n      // this.analyticsSrv.setScreenName(navigationEndEvent.urlAfterRedirects).catch(err => console.error('Failed to set screen name:', err));\n    });\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {Device} from '@capacitor/device';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilityService {\n  constructor() {}\n  getTimezoneOffset() {\n    return new Date().getTimezoneOffset();\n  }\n  getDateTime() {\n    // YYYY-MM-DDTHH:MM:SS\n    return new Date().toISOString().slice(0, 19);\n  }\n  getDate() {\n    // YYYY-MM-DD\n    return new Date().toISOString().slice(0, 10);\n  }\n  getFutureDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() + days);\n  }\n  getFutureDateYYYYMMDD(days) {\n    const timestamp = this.getFutureDate(days);\n    const date = new Date(timestamp);\n    return date.toISOString().slice(0, 10);\n  }\n  getPastDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() - days);\n  }\n  // https://stackoverflow.com/questions/46068084/calculating-week-number-with-typescript-right-hand-side-of-an-arithmetic-opera\n  getWeekNumber(dt: Date, type: 'int' | 'string' = 'int'): string {\n    const firstDayOfYear = new Date(dt.getFullYear(), 0, 1);\n\n    const startOfYearWeek = new Date(firstDayOfYear);\n    startOfYearWeek.setDate(firstDayOfYear.getDate() - firstDayOfYear.getDay());\n\n    const startOfCurrentWeek = new Date(dt);\n    startOfCurrentWeek.setDate(dt.getDate() - dt.getDay());\n\n    const msInWeek = 7 * 24 * 60 * 60 * 1000;\n    const weekNum = Math.floor((startOfCurrentWeek.getTime() - startOfYearWeek.getTime()) / msInWeek) + 1;\n    // returns ISO week date format YYYY-W01 minus current day, because we want the year / week number only.\n    if (type === 'string') {\n      return dt.getFullYear().toString() + '-W' + weekNum;\n    }\n    return weekNum.toString();\n  }\n  // https://stackoverflow.com/questions/4156434/javascript-get-the-first-day-of-the-week-from-current-date\n  getMonday(dt) {\n    const d = new Date(dt);\n    const day = d.getDay(),\n        diff = d.getDate() - day + (day === 0 ? -6:1); // adjust when day is sunday\n    const mon = new Date(d.setDate(diff));\n    return mon.getDate() + ' ' + this.months(mon.getMonth()) + ' ' + mon.getFullYear();\n  }\n  months(month) {\n    const monthL = [\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    const monthS = [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ];\n    return monthL[month];\n  }\n  days(day) {\n    const dayL = [\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n    const dayS = [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n    ];\n    return dayL[day];\n  }\n  getFirstDayOfWeek(week, y) {\n    const d = new Date('Jan 01, ' + y + ' 01:00:00');\n    const dayMs = (24 * 60 * 60 * 1000);\n    const offSetTimeStart = dayMs * (d.getDay() - 1);\n    const w = d.getTime() + 604800000 * (week - 1) - offSetTimeStart; // reducing the offset here\n    const n1 = new Date(w).toISOString().slice(0, 10);\n    const n2 = new Date(w + 518400000).toISOString().slice(0, 10);\n    return {\n      dateFrom: n1,\n      dateTo: n2,\n    }\n  }\n  timestampToMysqlDate(timestamp: number): string {\n    // Create a Date object from the Unix timestamp\n    const date = new Date(timestamp * 1000);\n\n    // Extract year, month, day, hours, minutes, and seconds\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are zero-based\n    const day = String(date.getDate()).padStart(2, '0');\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    const seconds = String(date.getSeconds()).padStart(2, '0');\n\n    // Combine into MySQL date format (YYYY-MM-DD HH:MM:SS)\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n  }\n  pagination(content, start, end) {\n    const result = [];\n    content.slice(start, end).map(i => {\n      result.push(i);\n    });\n    return result;\n  }\n  getRandomList(array, numberRequired) {\n    const result = [];\n    const taken = [];\n    const length = array.length;\n    if (numberRequired > length) {\n      throw new RangeError('getRandom: more elements taken than available');\n    }\n    let currentAmount = 0; // create an index to iterate through\n    while (currentAmount < numberRequired) { // while our index iterator (current items) is less than the required number of items..\n      const randomInt = Math.floor(Math.random() * length); // generate a random number between 0 and length of source array\n      if(taken.includes(randomInt)) { // if the random number exists in our taken array..\n        continue;  // skip this iteration to avoid a duplicate\n      } else {\n        taken[randomInt] = randomInt; // if random number not already used, then add it to the taken array to prevent it being used again\n      }\n      result[currentAmount] = array[randomInt]; // use the random number to get an item from source array and add to our result array\n      currentAmount++; // increment the index to move onto the next item\n    }\n    return result;\n  }\n  // removes duplicates from an array of objects\n  removeDuplicates(originalArray, field) {\n    const newArray = [];\n    const lookupObject  = {};\n    for (const x of Object.keys(originalArray)) {\n      lookupObject[originalArray[x][field]] = originalArray[x];\n    }\n    for(const x of Object.keys(lookupObject)) {\n      newArray.push(lookupObject[x]);\n    }\n    return newArray;\n  }\n  videoFormat() {\n    const video = document.createElement('video');\n    let format = '';\n    if (Boolean(video.canPlayType('application/x-mpegURL'))) {\n      format = 'x-mpegURL';\n    } else if (Boolean(video.canPlayType('application/dash+xml'))) {\n      format = 'dash+xml';\n    } else if (Boolean(video.canPlayType('video/mp4'))) {\n      format = 'video/mp4';\n    } else {\n      format = 'video playback not possible';\n    }\n    return format;\n  }\n  // accepts an array and an object property name to group by, returns an associative array.\n  groupBy(objectArray: any[], property: string) {\n    return objectArray.reduce((acc, obj) => {\n      const key = obj[property]\n      if (!acc[key]) {\n        acc[key] = []\n      }\n      acc[key].push(obj);\n      return acc;\n    }, {})\n  }\n  async deviceInfo() {\n    return await Device.getInfo();\n  }\n  async operatingSystem() {\n    const deviceInformation = await this.deviceInfo();\n    const operatingSystem = deviceInformation.operatingSystem; // 'ios' | 'android' | 'windows' | 'mac' | 'unknown'\n    if (operatingSystem === 'mac' || operatingSystem === 'ios') {\n      return 'ios';\n    }\n    return operatingSystem;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {AuthService} from './auth.service';\nimport {concatMap, from, Observable} from 'rxjs';\nimport {UtilityService} from './utility.service';\nimport {Router} from '@angular/router';\nimport {environment} from '../../environments/environment';\nimport {\n  ActionPerformed,\n  PushNotificationSchema,\n  PushNotifications,\n  Token,\n} from '@capacitor/push-notifications';\nimport {Capacitor} from '@capacitor/core';\n// import {ApiGatewayService} from './apigateway.service';\n// import {AnalyticsService} from './analytics.service';\n// import {LoggerService} from './logger.service';\n// import {SubscriptionsService} from './subscriptions.service';\nimport {map} from 'rxjs/operators';\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  public sub: string;\n  private cdn = environment.cdn;\n  private userAttributes: any;\n  private userData: any;\n  public preferences: {\n    newsletter: boolean,\n    analytics: boolean,\n    notifications: boolean\n  } = {\n    newsletter: false,\n    analytics: false,\n    notifications: false,\n  }\n  constructor(\n    private auth: AuthService,\n    private utils: UtilityService,\n    private router: Router,\n  ) {\n    this.pushListener();\n  }\n  /**\n   * API Functions for DynamoDB user record\n   */\n  public getUserData(user: string): Observable<any> {\n    // return this.api.get('userData/users?pk=' + user)\n    return from(user)\n  }\n  public updateUserProfile(body: any): Observable<any> {\n    // return this.api.patch('userData', body);\n    return from(body);\n  }\n  public deleteUserProfile(user: string): Observable<any> {\n    // return this.api.delete('userData/users?pk='+user+'&sk='+user);\n    return from(user);\n  }\n  public logDeleteRequest(user: string): Observable<any> {\n    const body: any = {\n      pk: 'deleteUserRequest',\n      sk: this.utils.getDate(),\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        requestDate: this.utils.getDateTime(),\n        userId: user\n      }\n    }\n    // return this.api.post('userData', body);\n    return from(body);\n  }\n\n  /**\n   * post user data to email marketing platform\n   */\n  public newsletterSubscription() {\n    return this.auth.getUserAttributes().pipe(\n      concatMap((userAttributes) => {\n        this.userAttributes = userAttributes;\n        return this.getUserProfile();\n      }),\n      concatMap((userData) => {\n        this.userData = userData[0].dataMap;\n        // return this.subsSrv.subscribed;\n        return userData;\n      }),\n      concatMap((subscribed) => {\n        const avatar = this.userData.avatar ? this.cdn+this.userData?.avatar : this.cdn+'happyme-app-logo.svg';\n        const avatarId = this.userData?.avatarId ? this.cdn+this.userData?.avatarId : 3;\n        const request: any = {\n          email: this.userAttributes.email,\n          subscribed,\n          avatarId,\n          avatar,\n          emailBlacklisted: !this.userData.optInNewsletter\n        }\n        // return this.api.post('subscriptions/newsletter', request);\n        return from(request);\n      })\n    )\n  }\n  public setNotification(notification: { section: any; status: any; time?: any; }) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        // opt into notifications if true\n        if(notification.status === true) {\n          this.pushSubscription(true);\n        }\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          dataMap: {\n            notifications: {\n              [notification.section]: notification\n            }\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  public pushSubscription(optInReminders: boolean): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (Capacitor.isNativePlatform()) {\n        if (optInReminders) {\n          // Request permission to use push notifications\n          PushNotifications.requestPermissions().then(result => {\n            if (result.receive === 'granted') {\n              // Register with Apple / Google to receive push via APNS/FCM\n              PushNotifications.register()\n                .then(() => {\n                  resolve('granted'); // Resolve the promise with 'granted'\n                })\n                .catch(error => {\n                  reject(error); // Reject if registration fails\n                });\n            } else if (result.receive === 'denied') {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('denied'), // Resolve with 'denied'\n                error: err => reject(err), // Reject if update fails\n              });\n            }\n          }).catch(error => {\n            reject(error); // Reject if permission request fails\n          });\n        } else {\n          // Unsubscribe from push notifications\n          PushNotifications.unregister()\n            .then(() => {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('unsubscribed'), // Resolve with 'unsubscribed'\n                error: err => reject(err), // Reject if update fails\n              });\n            })\n            .catch(error => {\n              reject(error); // Reject if unregister fails\n            });\n        }\n      } else {\n        resolve('unsupported'); // For non-native platforms\n      }\n    });\n  }\n  pushListener() {\n    if(Capacitor.isNativePlatform()) {\n      // On success, we should be able to receive notifications\n      void PushNotifications.addListener('registration', (token: Token) => {\n        this.updateUserPushSub(token.value).subscribe();\n      });\n      // Some issue with our setup and push will not work\n      void PushNotifications.addListener('registrationError',\n        (error: any) => {\n          const body = {\n            pk: 'pushNotification#RegistrationError',\n            sk: this.utils.getDateTime(),\n            dataMap: error,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Show us the notification payload if the app is open on our device\n      void PushNotifications.addListener('pushNotificationReceived',\n        (notification: PushNotificationSchema) => {\n          const body = {\n            pk: 'pushNotification#Received',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Method called when tapping on a notification\n      void PushNotifications.addListener('pushNotificationActionPerformed',\n        (notification: ActionPerformed) => {\n          const body = {\n            pk: 'pushNotification#ActionPerformed',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n    }\n  }\n  /**\n   * Get User ID from Cognito and use it to get User Data in DynamoDB\n   */\n  public getUserProfile(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        return this.getUserData(user);\n      })\n    );\n  }\n  /**\n   * creates or updates a user record in DynamoDB, to save user related data\n   */\n  public updateUser(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        this.sub = user;\n        return this.getUserData(user);\n      }),\n      concatMap(userData => {\n        if(userData.length === 0) {\n          return this.createUser(this.sub);\n        } else {\n          return this.updateUserAtLogin(this.sub);\n        }\n      })\n    );\n  }\n  public updateUserPushSub(token: string) {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        const userData = {\n          pk: 'users#' + user,\n          sk: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            fcmToken: token,\n            timezoneOffset: this.utils.getTimezoneOffset()\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  /**\n   * Create user in DynamoDB\n   * Save app-state variables against user in DynamoDB.\n   */\n  private createUser(user: string): Observable<any> {\n    const userData: any = {\n      pk: 'users#' + user,\n      sk: user,\n      userId: user,\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        userId: user,\n        lastLogin: this.utils.getDateTime(),\n        createdDate: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset(),\n        dismissedIntroSlides: true,\n        showIntroLink: true,\n        optInNewsletter: this.preferences.newsletter,\n        optInReminders: this.preferences.notifications,\n        optInAnalytics: this.preferences.analytics,\n        ageGroup: 0,\n        parentalStatus: []\n      }\n    };\n    this.utils.operatingSystem().then(async (os) => {\n      if (os !== 'ios') {\n        // await this.analytics.analyticsOptIn(this.preferences.analytics);\n      }\n    });\n    // return this.api.post('userData', userData);\n    return from(userData);\n  }\n  /**\n   * Update a user's last login\n   * @param user\n   * @private\n   */\n  private updateUserAtLogin(user: string) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        lastLogin: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset()\n      }\n    };\n    // this.analytics.analyticsOptIn(this.preferences.analytics).then();\n    return this.updateUserProfile(userData);\n  }\n  public updateUserPreferences(user: string, preferences: any) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        ageGroup: preferences.ageGroup,\n        parentalStatus: preferences.parentalStatus\n      }\n    }\n    return this.updateUserProfile(userData);\n  }\n  /**\n   * Delete the user record in DynamoDB\n   * Then delete the Cognito user and kill the session\n   * Finally redirect to login page.\n   */\n  public deleteUserAccount() {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        this.sub = user;\n        return this.deleteUserProfile(user);\n      }),\n      concatMap(() => {\n        this.preferences.newsletter = false;\n        this.preferences.analytics = false;\n        this.preferences.notifications = false;\n        return this.logDeleteRequest(this.sub);\n      }),\n      concatMap(() => {\n        return this.auth.deleteUser();\n      }),\n      map(() => {\n        this.router.navigateByUrl('/');\n      })\n    )\n  }\n\n  /**\n   * set help content as viewed so only appears on first view.\n   * @param fieldName\n   */\n  public setHelpViewed(fieldName: any) {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        const body = {\n          pk: 'users#' + user,\n          sk: user,\n          userId: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            [fieldName]: true\n          }\n        }\n        return this.updateUserProfile(body);\n      })\n    )\n  }\n\n  /**\n   * Intro banner on homepage. If dismissed save to user so not shown again\n   * @param state\n   */\n  showIntro(state: boolean) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            showIntroLink: state\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n}\n","import { HttpInterceptorFn } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { AuthService } from './services/auth.service';\nimport { Observable, from } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nexport const authInterceptor: HttpInterceptorFn = (request, next): Observable<any> => {\n  const authService = inject(AuthService); // Use `inject()` instead of constructor injection\n  const noAuthRequests = [\n    'introSlides',\n    'introSlides2'\n  ]; // Example excluded requests\n\n  const requestPath: string = request.url.substring(request.url.lastIndexOf('/') + 1);\n  if (!noAuthRequests.includes(requestPath)) {\n    return from(authService.getIDToken()).pipe(\n      switchMap((token) => {\n        const reqClone = request.clone({\n          setHeaders: {\n            Authorization: `${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        return next(reqClone);\n      })\n    );\n  } else {\n    const reqClone = request.clone({\n      setHeaders: {\n        'Content-Type': 'application/json',\n      },\n    });\n    return next(reqClone);\n  }\n};\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","import { Inject, Injectable } from \"@angular/core\";\nimport { DOCUMENT } from \"@angular/common\";\nimport { from, Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { environment } from \"../../environments/environment\";\nimport { Capacitor } from \"@capacitor/core\";\nimport {\n  confirmSignIn,\n  deleteUser,\n  fetchAuthSession,\n  fetchUserAttributes,\n  getCurrentUser,\n  signIn,\n  signOut,\n  signUp,\n  signInWithRedirect,\n} from \"@aws-amplify/auth\";\nimport { AuthProvider } from \"@aws-amplify/auth/dist/esm/types/inputs\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class AuthService {\n  private window: Window | null;\n\n  constructor(@Inject(DOCUMENT) private document: Document) {\n    this.window = this.document.defaultView ?? null;\n  }\n\n  /**\n   * ---------- SOCIAL LOGIN (Amplify-managed)\n   * Uses Amplify's signInWithRedirect which builds the Hosted UI URL,\n   * opens the system browser or in-app browser (depending on platform),\n   * and Amplify handles the redirect + token exchange.\n   */\n  public async socialSignIn(identityProvider: AuthProvider): Promise<void> {\n    try {\n      console.log(\"ðŸ”¥ socialSignIn starting\", {\n        provider: identityProvider,\n        isNative: Capacitor.isNativePlatform(),\n        platform: Capacitor.getPlatform(),\n        hostname: this.window?.location?.hostname,\n        production: environment.production,\n      });\n\n      // Optional debug: dump current Amplify config (useful when debugging redirect issues)\n      try {\n        const { Amplify } = await import(\"aws-amplify\");\n        const cfg = Amplify.getConfig();\n        console.log(\"ðŸ”§ Amplify config (auth redirects):\", {\n          signIn: cfg.Auth?.Cognito?.loginWith?.oauth?.redirectSignIn,\n          signOut: cfg.Auth?.Cognito?.loginWith?.oauth?.redirectSignOut,\n        });\n      } catch (cfgErr) {\n        console.warn(\"Could not read Amplify config for debug:\", cfgErr);\n      }\n\n      // Trigger Amplify's hosted UI flow\n      await signInWithRedirect({ provider: identityProvider });\n      console.log(\"âœ… signInWithRedirect initiated\");\n    } catch (err: any) {\n      console.error(\"âŒ socialSignIn error\", err);\n\n      const fallbackMsg = \"Authentication failed. Please try again.\";\n      let userMessage = fallbackMsg;\n\n      if (\n        err?.message?.includes(\"InvalidOriginException\") ||\n        err?.message?.includes(\"redirect\")\n      ) {\n        userMessage = \"Redirect URL mismatch. Check callback URLs in Cognito.\";\n      } else if (err?.message?.includes(\"provider\")) {\n        userMessage = \"OAuth provider configuration incorrect.\";\n      } else if (err?.message?.includes(\"NetworkError\")) {\n        userMessage = \"Network error. Check your connection.\";\n      }\n\n      // Friendly user alert (you may replace with Toast)\n      // In production you might want to surface a nicer UI rather than an alert\n      alert(`Authentication Error\\n\\n${userMessage}`);\n\n      // rethrow if caller needs to handle\n      throw new Error(userMessage);\n    }\n  }\n\n  /**\n   * ---------- USERNAME/PASSWORD SIGN-IN (custom auth aware)\n   * If Cognito returns nextStep with 'CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE',\n   * the caller/UI should call answerCustomChallenge() to complete.\n   */\n  public async signInWithUsername(\n    email: string\n  ): Promise<{ isSignedIn?: boolean; nextStep?: any }> {\n    try {\n      const result = await signIn({\n        username: email,\n        options: {\n          authFlowType: \"CUSTOM_WITHOUT_SRP\", // leave as-is if you rely on custom flow\n        },\n      });\n      // result may contain isSignedIn and nextStep; return it so the UI can react\n      return result;\n    } catch (error: any) {\n      console.error(\"signInWithUsername error\", error);\n      // normalize error for caller\n      throw error;\n    }\n  }\n\n  /**\n   * Confirm a custom challenge response (e.g., OTP) for the custom auth flow\n   */\n  public async answerCustomChallenge(answer: string): Promise<string> {\n    try {\n      const { isSignedIn, nextStep } = await confirmSignIn({\n        challengeResponse: answer,\n      });\n      if (isSignedIn) return \"isSignedIn\";\n\n      if (\"additionalInfo\" in nextStep) {\n        return JSON.stringify(nextStep.additionalInfo); // ðŸ‘ˆ make it a string\n      }\n\n      return \"Challenge not fully satisfied\";\n    } catch (error: any) {\n      console.error(\"answerCustomChallenge error\", error);\n\n      if (error?.name?.includes(\"EmptyChallengeResponse\")) {\n        return \"Please enter the code you were emailed\";\n      }\n      if (error?.name?.includes(\"SignInException\")) {\n        return \"There was an issue, try again or return to login.\";\n      }\n      return \"There was an issue, please try again.\";\n    }\n  }\n\n  /**\n   * Sign up (keeps current behaviour with randomly generated password for custom flows)\n   */\n  public async signUp(email: string): Promise<boolean> {\n    try {\n      const { isSignUpComplete } = await signUp({\n        username: email,\n        password: this.getRandomString(30),\n        options: { userAttributes: { email } },\n      });\n      return isSignUpComplete;\n    } catch (error: any) {\n      console.error(\"signUp error\", error);\n      if (error?.name === \"UserLambdaValidationException\") {\n        throw new Error(\n          error.message.replace(/^PreSignUp failed with error\\s*/, \"\")\n        );\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Sign out (Amplify)\n   */\n  public async signOut(): Promise<void> {\n    try {\n      await signOut();\n    } catch (error) {\n      console.error(\"signOut error\", error);\n    }\n  }\n\n  /**\n   * Delete user\n   */\n  public async deleteUser(): Promise<any> {\n    try {\n      return await deleteUser();\n    } catch (error) {\n      console.error(\"deleteUser error\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get basic user/session helpers (uses Amplify under the hood)\n   */\n  public async getAccessKeys(): Promise<any> {\n    const session = await fetchAuthSession();\n    return session.credentials;\n  }\n\n  public getUserSub(): Observable<any> {\n    return from(getCurrentUser()).pipe(map((u) => (u as any).userId));\n  }\n\n  public getUserAttributes(): Observable<any> {\n    return from(fetchUserAttributes());\n  }\n\n  public getUserEmail(): Observable<any> {\n    return from(fetchUserAttributes()).pipe(map((attrs: any) => attrs.email));\n  }\n\n  public async getUserAttributesPromise(): Promise<any> {\n    return await fetchUserAttributes();\n  }\n\n  /**\n   * Avoid shadowing Amplify fetchAuthSession â€” return id token string\n   */\n  private async fetchIdToken(): Promise<string | undefined> {\n    const { tokens } = await fetchAuthSession();\n    return tokens?.idToken?.toString();\n  }\n\n  public async isAuthenticated(): Promise<boolean> {\n    try {\n      const session = await fetchAuthSession();\n      // Check if we have valid access tokens (not just guest credentials)\n      return !!(session.tokens?.accessToken && session.tokens?.idToken);\n    } catch {\n      return false;\n    }\n  }\n\n  public async getIDToken(): Promise<string | undefined> {\n    return await this.fetchIdToken();\n  }\n\n  // UTIL\n  private getRandomString(bytes: number): string {\n    const randomValues = new Uint8Array(bytes);\n    this.window?.crypto.getRandomValues(randomValues);\n    return Array.from(randomValues).map(this.intToHex).join(\"\");\n  }\n\n  private intToHex(nr: number): string {\n    return nr.toString(16).padStart(2, \"0\");\n  }\n}\n","export const environment = {\n  production: false,\n  cdn: '',\n  imgCdn: '',\n  apiGateway: '',\n  apiGatewayStage: '',\n  subscriptionsIOSAPIKey: '',\n  subscriptionsAndroidAPIKey: '',\n  awsConfig: {\n    region: 'eu-north-1',\n    cognitoDomain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n    userPoolId: 'eu-north-1_bZzl2ybtS',\n    userPoolClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    userPoolWebClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    identityPoolId: 'eu-north-1:e4a55099-41fe-4984-9c09-849a07a26f04',\n    oauth: {\n      domain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n      scope: ['email', 'openid', 'profile'],\n      redirectSignIn: 'tensilapp://callback',\n      redirectSignOut: 'tensilapp://logout',\n      responseType: 'code'\n    }\n  },\n  firebaseConfig: {\n    apiKey: '',\n    authDomain: '',\n    databaseURL: '',\n    projectId: '',\n    storageBucket: '',\n    messagingSenderId: '',\n    appId: '',\n    measurementId: ''\n  }\n};\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 54140;\nmodule.exports = webpackEmptyAsyncContext;","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { AuthService } from './services/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/account/login']);\n    return false;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsNotAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (!await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/home']);\n    return false;\n  }\n}\n","import \"aws-amplify/auth/enable-oauth-listener\";\nimport { enableProdMode, importProvidersFrom } from \"@angular/core\";\nimport { environment } from \"./environments/environment\";\nimport { Amplify } from \"aws-amplify\";\nimport { bootstrapApplication } from \"@angular/platform-browser\";\nimport { AppComponent } from \"./app/app.component\";\nimport { provideHttpClient, withInterceptors } from \"@angular/common/http\";\nimport { IonicModule, isPlatform } from \"@ionic/angular\";\nimport { provideRouter, withHashLocation } from \"@angular/router\";\nimport { routes } from \"./app/app-routing.module\";\nimport { authInterceptor } from \"./app/auth.interceptor\";\nimport { provideLottieOptions } from \"ngx-lottie\";\nimport { IonicStorageModule } from \"@ionic/storage-angular\";\nimport { register } from \"swiper/element/bundle\";\nimport { Hub } from \"aws-amplify/utils\";\nimport { Router } from \"@angular/router\";\nimport { Capacitor } from \"@capacitor/core\";\nregister();\n\n// Player factory method for lottie-web\nexport function playerFactory() {\n  return import(\"lottie-web\");\n}\n\nif (environment.production) {\n  enableProdMode();\n}\nconst mobileRedirect = \"tensilapp://callback\";\nconst mobileSignOut = \"tensilapp://callback\";\n\nconst webRedirectDev = \"http://localhost:8100/callback\";\nconst webSignOutDev = \"http://localhost:8100\";\n\nconst webRedirectProd = \"https://cognito-capacitor-login.vercel.app/callback\";\nconst webSignOutProd = \"https://cognito-capacitor-login.vercel.app\";\n\n// Determine if we're in development or production web mode\nconst isLocalDev =\n  !environment.production &&\n  !isPlatform(\"capacitor\") &&\n  (window.location.hostname === \"localhost\" ||\n    window.location.hostname === \"127.0.0.1\");\n\nconst webRedirect = isLocalDev ? webRedirectDev : webRedirectProd;\nconst webSignOut = isLocalDev ? webSignOutDev : webSignOutProd;\n\nAmplify.configure({\n  Auth: {\n    Cognito: {\n      userPoolId: environment.awsConfig.userPoolId,\n      userPoolClientId: environment.awsConfig.userPoolClientId,\n      identityPoolId: environment.awsConfig.identityPoolId,\n      loginWith: {\n        oauth: {\n          domain: environment.awsConfig.cognitoDomain || environment.awsConfig.oauth.domain,\n          redirectSignIn: isPlatform(\"capacitor\")\n            ? [mobileRedirect]\n            : [webRedirect],\n\n          redirectSignOut: isPlatform(\"capacitor\")\n            ? [mobileSignOut]\n            : [webSignOut],\n\n          responseType: \"code\",\n          scopes: [\"email\", \"openid\", \"profile\"],\n        },\n      },\n    },\n  },\n});\n\n// Debug configuration\nconsole.log(\"ðŸ”§ AWS Amplify Configuration:\", {\n  userPoolId: environment.awsConfig.userPoolId,\n  userPoolClientId: environment.awsConfig.userPoolClientId,\n  identityPoolId: environment.awsConfig.identityPoolId,\n  cognitoDomain: environment.awsConfig.cognitoDomain,\n  platform: isPlatform(\"capacitor\") ? \"capacitor\" : \"web\",\n  isLocalDev: isLocalDev,\n  hostname: window.location.hostname,\n  mobileRedirect: mobileRedirect,\n  mobileSignOut: mobileSignOut,\n  webRedirect: webRedirect,\n  webSignOut: webSignOut,\n  redirectSignIn: isPlatform(\"capacitor\") ? [mobileRedirect] : [webRedirect],\n  redirectSignOut: isPlatform(\"capacitor\") ? [mobileSignOut] : [webSignOut],\n});\n\nconst currentConfig = Amplify.getConfig();\nconsole.log(\"ðŸ”§ Final Amplify Config:\", currentConfig);\nconsole.log(\"ðŸ”§ OAuth Configuration Details:\", {\n  oauthConfig: currentConfig.Auth?.Cognito?.loginWith?.oauth,\n  redirectArrays: {\n    signIn: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignIn,\n    signOut: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignOut,\n  },\n  scopes: currentConfig.Auth?.Cognito?.loginWith?.oauth?.scopes,\n  responseType: currentConfig.Auth?.Cognito?.loginWith?.oauth?.responseType,\n});\n\nHub.listen(\"auth\", async ({ payload }) => {\n  console.log(\"ðŸŽ¯ Auth Hub Event:\", {\n    event: payload.event,\n    data: (payload as any).data,\n    fullPayload: payload,\n  });\n\n  switch (payload.event) {\n    case \"signInWithRedirect\":\n      console.log(\"ðŸŽ¯ signInWithRedirect SUCCESS\");\n      const router = (window as any).ng?.getInjector()?.get(Router);\n      await router?.navigate([\"/home\"]);\n      break;\n    case \"signInWithRedirect_failure\":\n      console.error(\"ðŸŽ¯ signInWithRedirect FAILED:\", {\n        error: (payload as any).data,\n        errorType: typeof (payload as any).data,\n        errorKeys: (payload as any).data\n          ? Object.keys((payload as any).data)\n          : \"no keys\",\n        fullError: JSON.stringify((payload as any).data, null, 2),\n      });\n      break;\n    case \"customOAuthState\":\n      console.log(\"ðŸŽ¯ customOAuthState received:\", (payload as any).data);\n      const state = (payload as any).data; // this will be customState provided on signInWithRedirect function\n      break;\n    case \"signInWithRedirect_failure\":\n      console.error(\"ðŸŽ¯ OAuth redirect failure event\");\n      break;\n    default:\n      console.log(\"ðŸŽ¯ Unhandled auth event:\", payload.event);\n      break;\n  }\n});\n\n// Set up deep link handling for mobile apps\nif (Capacitor.isNativePlatform()) {\n  import(\"@capacitor/app\").then(({ App }) => {\n    App.addListener(\"appUrlOpen\", (data: any) => {\n      console.log(\"ðŸ”— Deep link received:\", data.url);\n\n      // Check if this is an OAuth callback (custom scheme or Universal Link)\n      if (\n        data.url.includes(\"tensilapp://callback\") ||\n        data.url.includes(\"tensilapp://logout\") ||\n        data.url.includes(\"https://cognito-capacitor-login.vercel.app/callback\")\n      ) {\n        console.log(\"ðŸ”— OAuth callback detected, processing...\");\n\n        // Extract query parameters from the URL\n        try {\n          const url = new URL(data.url);\n          const code = url.searchParams.get(\"code\");\n          const error = url.searchParams.get(\"error\");\n\n          if (error) {\n            console.error(\"OAuth error:\", error);\n          } else if (code) {\n            console.log(\"OAuth code received:\", code);\n            // Let Amplify handle the token exchange\n            window.location.href = data.url;\n          }\n        } catch (err) {\n          console.error(\"Error processing deep link:\", err);\n        }\n      }\n    });\n  });\n}\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideHttpClient(withInterceptors([authInterceptor])),\n    importProvidersFrom(IonicModule.forRoot(), IonicStorageModule.forRoot()),\n    provideLottieOptions({\n      player: playerFactory,\n    }),\n    // Use hash routing only for mobile (Capacitor) to avoid file:// protocol issues\n    // Use regular routing for web to support Universal Links and OAuth callbacks\n    provideRouter(\n      routes,\n      ...(isPlatform(\"capacitor\") ? [withHashLocation()] : [])\n    ),\n  ],\n}).catch((err) => console.error(err));\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t37518,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js\"\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t41981,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-action-sheet_entry_js\"\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t71603,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-alert_entry_js\"\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t82273,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-app_8_entry_js\"\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t19642,\n\t\t\"node_modules_ionic_core_dist_esm_ion-avatar_3_entry_js\"\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t32095,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-back-button_entry_js\"\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t72335,\n\t\t\"node_modules_ionic_core_dist_esm_ion-backdrop_entry_js\"\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t78221,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-breadcrumb_2_entry_js\"\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t47184,\n\t\t\"node_modules_ionic_core_dist_esm_ion-button_2_entry_js\"\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t38759,\n\t\t\"node_modules_ionic_core_dist_esm_ion-card_5_entry_js\"\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t24248,\n\t\t\"node_modules_ionic_core_dist_esm_ion-checkbox_entry_js\"\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t69863,\n\t\t\"node_modules_ionic_core_dist_esm_ion-chip_entry_js\"\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t51769,\n\t\t\"node_modules_ionic_core_dist_esm_ion-col_3_entry_js\"\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t2569,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime-button_entry_js\"\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t76534,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime_3_entry_js\"\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t25458,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-fab_3_entry_js\"\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t70654,\n\t\t\"node_modules_ionic_core_dist_esm_ion-img_entry_js\"\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t36034,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js\"\n\t],\n\t\"./ion-input-password-toggle.entry.js\": [\n\t\t5196,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input-password-toggle_entry_js\"\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t20761,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input_entry_js\"\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t6492,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item-option_3_entry_js\"\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t29557,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item_8_entry_js\"\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t68353,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-loading_entry_js\"\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t51024,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-menu_3_entry_js\"\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t29160,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-modal_entry_js\"\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t60393,\n\t\t\"node_modules_ionic_core_dist_esm_ion-nav_2_entry_js\"\n\t],\n\t\"./ion-picker-column-option.entry.js\": [\n\t\t68442,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column-option_entry_js\"\n\t],\n\t\"./ion-picker-column.entry.js\": [\n\t\t43110,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column_entry_js\"\n\t],\n\t\"./ion-picker.entry.js\": [\n\t\t15575,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker_entry_js\"\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t16772,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-popover_entry_js\"\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t34810,\n\t\t\"node_modules_ionic_core_dist_esm_ion-progress-bar_entry_js\"\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t14639,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-radio_2_entry_js\"\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t90628,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-range_entry_js\"\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t10852,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-refresher_2_entry_js\"\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t61479,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js\"\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t24065,\n\t\t\"node_modules_ionic_core_dist_esm_ion-ripple-effect_entry_js\"\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t57971,\n\t\t\"node_modules_ionic_core_dist_esm_ion-route_4_entry_js\"\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t93184,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-searchbar_entry_js\"\n\t],\n\t\"./ion-segment-content.entry.js\": [\n\t\t94312,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-content_entry_js\"\n\t],\n\t\"./ion-segment-view.entry.js\": [\n\t\t54540,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-view_entry_js\"\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t469,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment_2_entry_js\"\n\t],\n\t\"./ion-select-modal.entry.js\": [\n\t\t57101,\n\t\t\"node_modules_ionic_core_dist_esm_ion-select-modal_entry_js\"\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t78471,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-select_3_entry_js\"\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t40388,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-spinner_entry_js\"\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t42392,\n\t\t\"node_modules_ionic_core_dist_esm_ion-split-pane_entry_js\"\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t36059,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab-bar_2_entry_js\"\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t5427,\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab_2_entry_js\"\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t50198,\n\t\t\"node_modules_ionic_core_dist_esm_ion-text_entry_js\"\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t1735,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-textarea_entry_js\"\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t7510,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toast_entry_js\"\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t45297,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toggle_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 88996;\nmodule.exports = webpackAsyncContext;","import { NgModule } from '@angular/core';\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\nimport {IsAuthenticated, IsNotAuthenticated} from './auth.guard';\n\nexport const routes: Routes = [\n  // INTRO - only show to unauthenticated users\n  {\n    path: '',\n    loadComponent: () => import('./pages/intro/intro.page').then( c => c.IntroPage),\n    canActivate: [IsNotAuthenticated]\n  },\n  // HOME\n  {\n    path: 'home',\n    loadComponent: () => import('./pages/home/home.page').then(c => c.HomePage),\n    canActivate: [IsAuthenticated]\n  },\n  // ACCOUNT PAGES\n  {\n    path: 'account',\n    loadChildren: () => import('./pages/account/account-routing.module').then(m => m.AccountRoutingModule),\n  },\n  {\n    path: 'callback',\n    loadComponent: () => import('./pages/account/callback/callback.component').then( c => c.CallbackComponent),\n  },\n  // 404 page - redirect to login for unauthenticated users\n  {\n    path: '**',\n    redirectTo: '/account/login'\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules }),\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n"],"names":["Component","Router","NavigationEnd","filter","UserService","UtilityService","IonicModule","App","EdgeToEdge","StatusBar","Style","AppComponent","router","userSrv","utils","REDIRECT_URI","constructor","_this","addListener","_ref","_asyncToGenerator","event","console","log","url","incoming","startsWith","URL","code","searchParams","get","error","navigate","Promise","resolve","setTimeout","getCurrentUser","user","authError","parseError","_x","apply","arguments","handleOAuthCallback","_this2","urlParams","URLSearchParams","window","location","search","state","ngOnInit","_this3","enable","setBackgroundColor","color","setStyle","style","Light","operatingSystem","then","os","watchRoutes","events","pipe","subscribe","navigationEndEvent","__decorate","selector","template","__NG_CLI_RESOURCE__0","imports","standalone","Injectable","Device","getTimezoneOffset","Date","getDateTime","toISOString","slice","getDate","getFutureDate","days","date","setDate","getFutureDateYYYYMMDD","timestamp","getPastDate","getWeekNumber","dt","type","firstDayOfYear","getFullYear","startOfYearWeek","getDay","startOfCurrentWeek","msInWeek","weekNum","Math","floor","getTime","toString","getMonday","d","day","diff","mon","months","getMonth","month","monthL","monthS","dayL","dayS","getFirstDayOfWeek","week","y","dayMs","offSetTimeStart","w","n1","n2","dateFrom","dateTo","timestampToMysqlDate","year","String","padStart","hours","getHours","minutes","getMinutes","seconds","getSeconds","pagination","content","start","end","result","map","i","push","getRandomList","array","numberRequired","taken","length","RangeError","currentAmount","randomInt","random","includes","removeDuplicates","originalArray","field","newArray","lookupObject","x","Object","keys","videoFormat","video","document","createElement","format","Boolean","canPlayType","groupBy","objectArray","property","reduce","acc","obj","key","deviceInfo","getInfo","deviceInformation","providedIn","AuthService","concatMap","from","environment","PushNotifications","Capacitor","auth","sub","cdn","userAttributes","userData","preferences","newsletter","analytics","notifications","pushListener","getUserData","updateUserProfile","body","deleteUserProfile","logDeleteRequest","pk","sk","createdDate","updatedDate","dataMap","requestDate","userId","newsletterSubscription","getUserAttributes","getUserProfile","subscribed","avatar","avatarId","request","email","emailBlacklisted","optInNewsletter","setNotification","notification","getUserSub","status","pushSubscription","section","optInReminders","reject","isNativePlatform","requestPermissions","receive","register","catch","updateUserPushSub","next","err","unregister","token","value","updateUser","createUser","updateUserAtLogin","fcmToken","timezoneOffset","lastLogin","dismissedIntroSlides","showIntroLink","optInAnalytics","ageGroup","parentalStatus","updateUserPreferences","deleteUserAccount","deleteUser","navigateByUrl","setHelpViewed","fieldName","showIntro","inject","switchMap","authInterceptor","authService","noAuthRequests","requestPath","substring","lastIndexOf","getIDToken","reqClone","clone","setHeaders","Authorization","Inject","DOCUMENT","confirmSignIn","fetchAuthSession","fetchUserAttributes","signIn","signOut","signUp","signInWithRedirect","defaultView","socialSignIn","identityProvider","provider","isNative","platform","getPlatform","hostname","production","Amplify","cfg","getConfig","Auth","Cognito","loginWith","oauth","redirectSignIn","redirectSignOut","cfgErr","warn","fallbackMsg","userMessage","message","alert","Error","signInWithUsername","username","options","authFlowType","answerCustomChallenge","answer","isSignedIn","nextStep","challengeResponse","JSON","stringify","additionalInfo","name","isSignUpComplete","password","getRandomString","replace","getAccessKeys","session","credentials","u","getUserEmail","attrs","getUserAttributesPromise","fetchIdToken","tokens","idToken","isAuthenticated","accessToken","bytes","randomValues","Uint8Array","crypto","getRandomValues","Array","intToHex","join","nr","args","Document","imgCdn","apiGateway","apiGatewayStage","subscriptionsIOSAPIKey","subscriptionsAndroidAPIKey","awsConfig","region","cognitoDomain","userPoolId","userPoolClientId","userPoolWebClientId","identityPoolId","domain","scope","responseType","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","IsAuthenticated","canActivate","IsNotAuthenticated","enableProdMode","importProvidersFrom","bootstrapApplication","provideHttpClient","withInterceptors","isPlatform","provideRouter","withHashLocation","routes","provideLottieOptions","IonicStorageModule","Hub","playerFactory","mobileRedirect","mobileSignOut","webRedirectDev","webSignOutDev","webRedirectProd","webSignOutProd","isLocalDev","webRedirect","webSignOut","configure","scopes","currentConfig","oauthConfig","redirectArrays","listen","payload","data","fullPayload","ng","getInjector","errorType","errorKeys","fullError","href","providers","forRoot","player","NgModule","PreloadAllModules","RouterModule","path","loadComponent","c","IntroPage","HomePage","loadChildren","m","AccountRoutingModule","CallbackComponent","redirectTo","AppRoutingModule","preloadingStrategy","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[7,10]}