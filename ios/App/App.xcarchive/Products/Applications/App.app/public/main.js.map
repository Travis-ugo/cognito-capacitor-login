{"version":3,"file":"main.js","mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,qC;;;;;;;;;;;;;;;;;;;;;AC/PyC;AACiC;AAC7B;AAEtC,MAAM+J,MAAM,GAAW;AAC5B;AACA;EACE2B,IAAI,EAAE,EAAE;EACRC,aAAa,EAAEA,CAAA,KAAM,+bAAkC,CAACtW,IAAI,CAAEuW,CAAC,IAAIA,CAAC,CAACC,SAAS;CAC/E;AACD;AACA;EACEH,IAAI,EAAE,MAAM;EACZC,aAAa,EAAEA,CAAA,KAAM,2bAAgC,CAACtW,IAAI,CAACuW,CAAC,IAAIA,CAAC,CAACE,QAAQ,CAAC;EAC3EzC,WAAW,EAAE,CAACD,wDAAe;CAC9B;AACD;AACA;EACEsC,IAAI,EAAE,SAAS;EACfK,YAAY,EAAEA,CAAA,KAAM,2dAAgD,CAAC1W,IAAI,CAAC2W,CAAC,IAAIA,CAAC,CAACC,oBAAoB;CACtG,EACD;EACEP,IAAI,EAAE,UAAU;EAChBC,aAAa,EAAEA,CAAA,KAAM,qeAAqD,CAACtW,IAAI,CAAEuW,CAAC,IAAIA,CAAC,CAACM,iBAAiB;CAC1G;AACD;AACA;EACER,IAAI,EAAE,IAAI;EACVC,aAAa,EAAEA,CAAA,KAAM,+bAAkC,CAACtW,IAAI,CAAEuW,CAAC,IAAIA,CAAC,CAACC,SAAS;CAC/E,CACF;AAQM,IAAMM,gBAAgB,GAAtB,MAAMA,gBAAgB,GAAG;AAAnBA,gBAAgB,GAAAvW,iDAAA,EAN5B2V,uDAAQ,CAAC;EACRvV,OAAO,EAAE,CACPyV,yDAAY,CAACJ,OAAO,CAACtB,MAAM,EAAE;IAAEqC,kBAAkB,EAAEZ,8DAAiBA;EAAA,CAAE,CAAC,CACxE;EACDa,OAAO,EAAE,CAACZ,yDAAY;CACvB,CAAC,C,EACWU,gBAAgB,CAAG","sources":["./src/app/app.component.ts","./src/app/services/utility.service.ts","./src/app/services/user.service.ts","./src/app/auth.interceptor.ts","./src/app/app.component.scss","./src/app/services/auth.service.ts","./src/environments/environment.ts","./node_modules/@stencil/core/internal/client/ lazy ^\\.\\/.*\\.entry\\.js.*$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ strict namespace object","./src/app/auth.guard.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./src/app/app-routing.module.ts"],"sourcesContent":["import 'aws-amplify/auth/enable-oauth-listener';\nimport {Component, OnInit} from '@angular/core';\nimport {Router, NavigationEnd} from '@angular/router';\nimport {filter} from 'rxjs';\nimport {UserService} from './services/user.service';\nimport {UtilityService} from './services/utility.service';\nimport {IonicModule} from '@ionic/angular';\nimport {App} from '@capacitor/app';\nimport { EdgeToEdge } from '@capawesome/capacitor-android-edge-to-edge-support';\nimport { StatusBar, Style } from '@capacitor/status-bar';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.scss'],\n  imports: [IonicModule],\n  standalone: true\n})\nexport class AppComponent implements OnInit {\n  private REDIRECT_URI = 'tensilapp://callback';\n  constructor(\n    public router: Router,\n    private userSrv: UserService,\n    private utils: UtilityService,\n  ) {\n\n    App.addListener('appUrlOpen', async (event: {url: string}) => {\n      const incoming = event.url;\n      console.log('Deep link received:', incoming);\n\n      // Check if this is an OAuth callback\n      if (incoming.startsWith(this.REDIRECT_URI)) {\n        console.log('OAuth callback detected:', incoming);\n\n        try {\n          // Parse the URL to extract parameters\n          const url = new URL(incoming);\n          const code = url.searchParams.get('code');\n          const error = url.searchParams.get('error');\n\n          if (error) {\n            console.error('OAuth error:', error);\n            this.router.navigate(['/account/signup']);\n            return;\n          }\n\n          if (code) {\n            console.log('OAuth code received:', code);\n\n            // Wait for Amplify to process the OAuth callback\n            await new Promise(resolve => setTimeout(resolve, 1000));\n\n            // Check if user is authenticated\n            const { getCurrentUser } = await import('@aws-amplify/auth');\n            try {\n              const user = await getCurrentUser();\n              console.log('User authenticated via deep link:', user);\n              this.router.navigate(['/home']);\n            } catch (authError) {\n              console.error('Authentication failed after deep link:', authError);\n              this.router.navigate(['/account/signup']);\n            }\n          }\n        } catch (parseError) {\n          console.error('Error parsing deep link URL:', parseError);\n          this.router.navigate(['/account/signup']);\n        }\n      }\n    });\n  }\n\n  private async handleOAuthCallback() {\n    // Check if current URL contains OAuth callback parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const state = urlParams.get('state');\n\n    if (code && state) {\n      console.log('OAuth callback detected with code:', code);\n\n      try {\n        // Import Amplify auth functions\n        const { getCurrentUser } = await import('@aws-amplify/auth');\n\n        // Wait a moment for Amplify to process the OAuth callback\n        await new Promise(resolve => setTimeout(resolve, 2000));\n\n        // Check if user is now authenticated\n        const user = await getCurrentUser();\n        console.log('User authenticated:', user);\n\n        // Navigate to home page\n        this.router.navigate(['/home']);\n      } catch (error) {\n        console.error('Authentication failed:', error);\n        // If authentication failed, redirect to signup page\n        this.router.navigate(['/account/signup']);\n      }\n    }\n  }\n\n  async ngOnInit() {\n    await EdgeToEdge.enable();\n    await EdgeToEdge.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setBackgroundColor({ color: '#132530' });\n    await StatusBar.setStyle({ style: Style.Light });\n\n    // Check if this is an OAuth callback URL\n    this.handleOAuthCallback();\n\n    try {\n      console.log('App initialized - RevenueCat ready');\n    } catch (error) {\n      console.error('Failed to initialize subscription service', error);\n    }\n\n    this.utils.operatingSystem().then((os) => {\n      if(os === 'ios') {\n        /*this.analyticsSrv.attGetStatus().then((optIn: boolean) => {\n          this.userSrv.preferences.analytics = optIn;\n          if (optIn) {\n            this.analyticsSrv.initFb().then(() => {\n              this.analyticsSrv.analyticsOptIn(optIn).then(() => this.watchRoutes()).catch((e) => console.error(e));\n            });\n          }\n        });*/\n      } else {\n        // not iOS - optIn handled from register/profile page, so initialise and set to false\n        /*this.analyticsSrv.initFb().then(() => {\n          this.analyticsSrv.analyticsOptIn(false).then(() => this.watchRoutes()).catch((e) => console.error(e));\n        });*/\n      }\n    });\n  }\n  watchRoutes() {\n    this.router.events.pipe(\n      filter(event => event instanceof NavigationEnd)\n    ).subscribe((event) => {\n      const navigationEndEvent = event as NavigationEnd;\n      // this.analyticsSrv.setScreenName(navigationEndEvent.urlAfterRedirects).catch(err => console.error('Failed to set screen name:', err));\n    });\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {Device} from '@capacitor/device';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilityService {\n  constructor() {}\n  getTimezoneOffset() {\n    return new Date().getTimezoneOffset();\n  }\n  getDateTime() {\n    // YYYY-MM-DDTHH:MM:SS\n    return new Date().toISOString().slice(0, 19);\n  }\n  getDate() {\n    // YYYY-MM-DD\n    return new Date().toISOString().slice(0, 10);\n  }\n  getFutureDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() + days);\n  }\n  getFutureDateYYYYMMDD(days) {\n    const timestamp = this.getFutureDate(days);\n    const date = new Date(timestamp);\n    return date.toISOString().slice(0, 10);\n  }\n  getPastDate(days) {\n    const date = new Date();\n    return date.setDate(date.getDate() - days);\n  }\n  // https://stackoverflow.com/questions/46068084/calculating-week-number-with-typescript-right-hand-side-of-an-arithmetic-opera\n  getWeekNumber(dt: Date, type: 'int' | 'string' = 'int'): string {\n    const firstDayOfYear = new Date(dt.getFullYear(), 0, 1);\n\n    const startOfYearWeek = new Date(firstDayOfYear);\n    startOfYearWeek.setDate(firstDayOfYear.getDate() - firstDayOfYear.getDay());\n\n    const startOfCurrentWeek = new Date(dt);\n    startOfCurrentWeek.setDate(dt.getDate() - dt.getDay());\n\n    const msInWeek = 7 * 24 * 60 * 60 * 1000;\n    const weekNum = Math.floor((startOfCurrentWeek.getTime() - startOfYearWeek.getTime()) / msInWeek) + 1;\n    // returns ISO week date format YYYY-W01 minus current day, because we want the year / week number only.\n    if (type === 'string') {\n      return dt.getFullYear().toString() + '-W' + weekNum;\n    }\n    return weekNum.toString();\n  }\n  // https://stackoverflow.com/questions/4156434/javascript-get-the-first-day-of-the-week-from-current-date\n  getMonday(dt) {\n    const d = new Date(dt);\n    const day = d.getDay(),\n        diff = d.getDate() - day + (day === 0 ? -6:1); // adjust when day is sunday\n    const mon = new Date(d.setDate(diff));\n    return mon.getDate() + ' ' + this.months(mon.getMonth()) + ' ' + mon.getFullYear();\n  }\n  months(month) {\n    const monthL = [\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n    const monthS = [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ];\n    return monthL[month];\n  }\n  days(day) {\n    const dayL = [\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ];\n    const dayS = [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n    ];\n    return dayL[day];\n  }\n  getFirstDayOfWeek(week, y) {\n    const d = new Date('Jan 01, ' + y + ' 01:00:00');\n    const dayMs = (24 * 60 * 60 * 1000);\n    const offSetTimeStart = dayMs * (d.getDay() - 1);\n    const w = d.getTime() + 604800000 * (week - 1) - offSetTimeStart; // reducing the offset here\n    const n1 = new Date(w).toISOString().slice(0, 10);\n    const n2 = new Date(w + 518400000).toISOString().slice(0, 10);\n    return {\n      dateFrom: n1,\n      dateTo: n2,\n    }\n  }\n  timestampToMysqlDate(timestamp: number): string {\n    // Create a Date object from the Unix timestamp\n    const date = new Date(timestamp * 1000);\n\n    // Extract year, month, day, hours, minutes, and seconds\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are zero-based\n    const day = String(date.getDate()).padStart(2, '0');\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    const seconds = String(date.getSeconds()).padStart(2, '0');\n\n    // Combine into MySQL date format (YYYY-MM-DD HH:MM:SS)\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n  }\n  pagination(content, start, end) {\n    const result = [];\n    content.slice(start, end).map(i => {\n      result.push(i);\n    });\n    return result;\n  }\n  getRandomList(array, numberRequired) {\n    const result = [];\n    const taken = [];\n    const length = array.length;\n    if (numberRequired > length) {\n      throw new RangeError('getRandom: more elements taken than available');\n    }\n    let currentAmount = 0; // create an index to iterate through\n    while (currentAmount < numberRequired) { // while our index iterator (current items) is less than the required number of items..\n      const randomInt = Math.floor(Math.random() * length); // generate a random number between 0 and length of source array\n      if(taken.includes(randomInt)) { // if the random number exists in our taken array..\n        continue;  // skip this iteration to avoid a duplicate\n      } else {\n        taken[randomInt] = randomInt; // if random number not already used, then add it to the taken array to prevent it being used again\n      }\n      result[currentAmount] = array[randomInt]; // use the random number to get an item from source array and add to our result array\n      currentAmount++; // increment the index to move onto the next item\n    }\n    return result;\n  }\n  // removes duplicates from an array of objects\n  removeDuplicates(originalArray, field) {\n    const newArray = [];\n    const lookupObject  = {};\n    for (const x of Object.keys(originalArray)) {\n      lookupObject[originalArray[x][field]] = originalArray[x];\n    }\n    for(const x of Object.keys(lookupObject)) {\n      newArray.push(lookupObject[x]);\n    }\n    return newArray;\n  }\n  videoFormat() {\n    const video = document.createElement('video');\n    let format = '';\n    if (Boolean(video.canPlayType('application/x-mpegURL'))) {\n      format = 'x-mpegURL';\n    } else if (Boolean(video.canPlayType('application/dash+xml'))) {\n      format = 'dash+xml';\n    } else if (Boolean(video.canPlayType('video/mp4'))) {\n      format = 'video/mp4';\n    } else {\n      format = 'video playback not possible';\n    }\n    return format;\n  }\n  // accepts an array and an object property name to group by, returns an associative array.\n  groupBy(objectArray: any[], property: string) {\n    return objectArray.reduce((acc, obj) => {\n      const key = obj[property]\n      if (!acc[key]) {\n        acc[key] = []\n      }\n      acc[key].push(obj);\n      return acc;\n    }, {})\n  }\n  async deviceInfo() {\n    return await Device.getInfo();\n  }\n  async operatingSystem() {\n    const deviceInformation = await this.deviceInfo();\n    const operatingSystem = deviceInformation.operatingSystem; // 'ios' | 'android' | 'windows' | 'mac' | 'unknown'\n    if (operatingSystem === 'mac' || operatingSystem === 'ios') {\n      return 'ios';\n    }\n    return operatingSystem;\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {AuthService} from './auth.service';\nimport {concatMap, from, Observable} from 'rxjs';\nimport {UtilityService} from './utility.service';\nimport {Router} from '@angular/router';\nimport {environment} from '../../environments/environment';\nimport {\n  ActionPerformed,\n  PushNotificationSchema,\n  PushNotifications,\n  Token,\n} from '@capacitor/push-notifications';\nimport {Capacitor} from '@capacitor/core';\n// import {ApiGatewayService} from './apigateway.service';\n// import {AnalyticsService} from './analytics.service';\n// import {LoggerService} from './logger.service';\n// import {SubscriptionsService} from './subscriptions.service';\nimport {map} from 'rxjs/operators';\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  public sub: string;\n  private cdn = environment.cdn;\n  private userAttributes: any;\n  private userData: any;\n  public preferences: {\n    newsletter: boolean,\n    analytics: boolean,\n    notifications: boolean\n  } = {\n    newsletter: false,\n    analytics: false,\n    notifications: false,\n  }\n  constructor(\n    private auth: AuthService,\n    private utils: UtilityService,\n    private router: Router,\n  ) {\n    this.pushListener();\n  }\n  /**\n   * API Functions for DynamoDB user record\n   */\n  public getUserData(user: string): Observable<any> {\n    // return this.api.get('userData/users?pk=' + user)\n    return from(user)\n  }\n  public updateUserProfile(body: any): Observable<any> {\n    // return this.api.patch('userData', body);\n    return from(body);\n  }\n  public deleteUserProfile(user: string): Observable<any> {\n    // return this.api.delete('userData/users?pk='+user+'&sk='+user);\n    return from(user);\n  }\n  public logDeleteRequest(user: string): Observable<any> {\n    const body: any = {\n      pk: 'deleteUserRequest',\n      sk: this.utils.getDate(),\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        requestDate: this.utils.getDateTime(),\n        userId: user\n      }\n    }\n    // return this.api.post('userData', body);\n    return from(body);\n  }\n\n  /**\n   * post user data to email marketing platform\n   */\n  public newsletterSubscription() {\n    return this.auth.getUserAttributes().pipe(\n      concatMap((userAttributes) => {\n        this.userAttributes = userAttributes;\n        return this.getUserProfile();\n      }),\n      concatMap((userData) => {\n        this.userData = userData[0].dataMap;\n        // return this.subsSrv.subscribed;\n        return userData;\n      }),\n      concatMap((subscribed) => {\n        const avatar = this.userData.avatar ? this.cdn+this.userData?.avatar : this.cdn+'happyme-app-logo.svg';\n        const avatarId = this.userData?.avatarId ? this.cdn+this.userData?.avatarId : 3;\n        const request: any = {\n          email: this.userAttributes.email,\n          subscribed,\n          avatarId,\n          avatar,\n          emailBlacklisted: !this.userData.optInNewsletter\n        }\n        // return this.api.post('subscriptions/newsletter', request);\n        return from(request);\n      })\n    )\n  }\n  public setNotification(notification: { section: any; status: any; time?: any; }) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        // opt into notifications if true\n        if(notification.status === true) {\n          this.pushSubscription(true);\n        }\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          dataMap: {\n            notifications: {\n              [notification.section]: notification\n            }\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  public pushSubscription(optInReminders: boolean): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (Capacitor.isNativePlatform()) {\n        if (optInReminders) {\n          // Request permission to use push notifications\n          PushNotifications.requestPermissions().then(result => {\n            if (result.receive === 'granted') {\n              // Register with Apple / Google to receive push via APNS/FCM\n              PushNotifications.register()\n                .then(() => {\n                  resolve('granted'); // Resolve the promise with 'granted'\n                })\n                .catch(error => {\n                  reject(error); // Reject if registration fails\n                });\n            } else if (result.receive === 'denied') {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('denied'), // Resolve with 'denied'\n                error: err => reject(err), // Reject if update fails\n              });\n            }\n          }).catch(error => {\n            reject(error); // Reject if permission request fails\n          });\n        } else {\n          // Unsubscribe from push notifications\n          PushNotifications.unregister()\n            .then(() => {\n              this.updateUserPushSub('').subscribe({\n                next: () => resolve('unsubscribed'), // Resolve with 'unsubscribed'\n                error: err => reject(err), // Reject if update fails\n              });\n            })\n            .catch(error => {\n              reject(error); // Reject if unregister fails\n            });\n        }\n      } else {\n        resolve('unsupported'); // For non-native platforms\n      }\n    });\n  }\n  pushListener() {\n    if(Capacitor.isNativePlatform()) {\n      // On success, we should be able to receive notifications\n      void PushNotifications.addListener('registration', (token: Token) => {\n        this.updateUserPushSub(token.value).subscribe();\n      });\n      // Some issue with our setup and push will not work\n      void PushNotifications.addListener('registrationError',\n        (error: any) => {\n          const body = {\n            pk: 'pushNotification#RegistrationError',\n            sk: this.utils.getDateTime(),\n            dataMap: error,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Show us the notification payload if the app is open on our device\n      void PushNotifications.addListener('pushNotificationReceived',\n        (notification: PushNotificationSchema) => {\n          const body = {\n            pk: 'pushNotification#Received',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n      // Method called when tapping on a notification\n      void PushNotifications.addListener('pushNotificationActionPerformed',\n        (notification: ActionPerformed) => {\n          const body = {\n            pk: 'pushNotification#ActionPerformed',\n            sk: this.utils.getDateTime(),\n            dataMap: notification,\n            createdDate: this.utils.getDateTime(),\n            updatedDate: this.utils.getDateTime()\n          }\n          // this.logger.post(body).subscribe();\n        }\n      );\n    }\n  }\n  /**\n   * Get User ID from Cognito and use it to get User Data in DynamoDB\n   */\n  public getUserProfile(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        return this.getUserData(user);\n      })\n    );\n  }\n  /**\n   * creates or updates a user record in DynamoDB, to save user related data\n   */\n  public updateUser(): Observable<any> {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        this.sub = user;\n        return this.getUserData(user);\n      }),\n      concatMap(userData => {\n        if(userData.length === 0) {\n          return this.createUser(this.sub);\n        } else {\n          return this.updateUserAtLogin(this.sub);\n        }\n      })\n    );\n  }\n  public updateUserPushSub(token: string) {\n    return this.auth.getUserSub().pipe(\n      concatMap(user => {\n        const userData = {\n          pk: 'users#' + user,\n          sk: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            fcmToken: token,\n            timezoneOffset: this.utils.getTimezoneOffset()\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n  /**\n   * Create user in DynamoDB\n   * Save app-state variables against user in DynamoDB.\n   */\n  private createUser(user: string): Observable<any> {\n    const userData: any = {\n      pk: 'users#' + user,\n      sk: user,\n      userId: user,\n      createdDate: this.utils.getDateTime(),\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        userId: user,\n        lastLogin: this.utils.getDateTime(),\n        createdDate: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset(),\n        dismissedIntroSlides: true,\n        showIntroLink: true,\n        optInNewsletter: this.preferences.newsletter,\n        optInReminders: this.preferences.notifications,\n        optInAnalytics: this.preferences.analytics,\n        ageGroup: 0,\n        parentalStatus: []\n      }\n    };\n    this.utils.operatingSystem().then(async (os) => {\n      if (os !== 'ios') {\n        // await this.analytics.analyticsOptIn(this.preferences.analytics);\n      }\n    });\n    // return this.api.post('userData', userData);\n    return from(userData);\n  }\n  /**\n   * Update a user's last login\n   * @param user\n   * @private\n   */\n  private updateUserAtLogin(user: string) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        lastLogin: this.utils.getDateTime(),\n        timezoneOffset: this.utils.getTimezoneOffset()\n      }\n    };\n    // this.analytics.analyticsOptIn(this.preferences.analytics).then();\n    return this.updateUserProfile(userData);\n  }\n  public updateUserPreferences(user: string, preferences: any) {\n    const userData = {\n      pk: 'users#' + user,\n      sk: user,\n      updatedDate: this.utils.getDate(),\n      dataMap: {\n        ageGroup: preferences.ageGroup,\n        parentalStatus: preferences.parentalStatus\n      }\n    }\n    return this.updateUserProfile(userData);\n  }\n  /**\n   * Delete the user record in DynamoDB\n   * Then delete the Cognito user and kill the session\n   * Finally redirect to login page.\n   */\n  public deleteUserAccount() {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        this.sub = user;\n        return this.deleteUserProfile(user);\n      }),\n      concatMap(() => {\n        this.preferences.newsletter = false;\n        this.preferences.analytics = false;\n        this.preferences.notifications = false;\n        return this.logDeleteRequest(this.sub);\n      }),\n      concatMap(() => {\n        return this.auth.deleteUser();\n      }),\n      map(() => {\n        this.router.navigateByUrl('/');\n      })\n    )\n  }\n\n  /**\n   * set help content as viewed so only appears on first view.\n   * @param fieldName\n   */\n  public setHelpViewed(fieldName: any) {\n    return this.auth.getUserSub().pipe(\n      concatMap((user) => {\n        const body = {\n          pk: 'users#' + user,\n          sk: user,\n          userId: user,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            [fieldName]: true\n          }\n        }\n        return this.updateUserProfile(body);\n      })\n    )\n  }\n\n  /**\n   * Intro banner on homepage. If dismissed save to user so not shown again\n   * @param state\n   */\n  showIntro(state: boolean) {\n    return this.auth.getUserSub().pipe(\n      concatMap(sub => {\n        const userData = {\n          pk: 'users#' + sub,\n          sk: sub,\n          updatedDate: this.utils.getDate(),\n          dataMap: {\n            showIntroLink: state\n          }\n        };\n        return this.updateUserProfile(userData);\n      })\n    );\n  }\n}\n","import { HttpInterceptorFn } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { AuthService } from './services/auth.service';\nimport { Observable, from } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\nexport const authInterceptor: HttpInterceptorFn = (request, next): Observable<any> => {\n  const authService = inject(AuthService); // Use `inject()` instead of constructor injection\n  const noAuthRequests = [\n    'introSlides',\n    'introSlides2'\n  ]; // Example excluded requests\n\n  const requestPath: string = request.url.substring(request.url.lastIndexOf('/') + 1);\n  if (!noAuthRequests.includes(requestPath)) {\n    return from(authService.getIDToken()).pipe(\n      switchMap((token) => {\n        const reqClone = request.clone({\n          setHeaders: {\n            Authorization: `${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        return next(reqClone);\n      })\n    );\n  } else {\n    const reqClone = request.clone({\n      setHeaders: {\n        'Content-Type': 'application/json',\n      },\n    });\n    return next(reqClone);\n  }\n};\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","import {Inject, Injectable} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\nimport {from, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {environment} from '../../environments/environment';\nimport {Browser} from '@capacitor/browser';\nimport {App} from '@capacitor/app';\nimport {Capacitor} from '@capacitor/core';\nimport {\n  confirmSignIn,\n  deleteUser,\n  fetchAuthSession,\n  fetchUserAttributes,\n  getCurrentUser,\n  signIn,\n  signOut,\n  signUp,\n  signInWithRedirect\n} from '@aws-amplify/auth';\nimport {AuthProvider} from '@aws-amplify/auth/dist/esm/types/inputs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // Get access to window object in the Angular way\n  private window: Window;\n  constructor(\n      @Inject(DOCUMENT) private document: Document,\n  ) {\n    this.window = this.document.defaultView;\n  }\n  async socialSignIn(identityProvider: AuthProvider) {\n    try {\n      console.log('🔥 STARTING SOCIAL SIGN-IN');\n      console.log('🔥 Provider:', identityProvider);\n      console.log('🔥 Platform info:', {\n        isNative: Capacitor.isNativePlatform(),\n        platform: Capacitor.getPlatform(),\n        hostname: this.window?.location?.hostname,\n        production: environment.production\n      });\n\n      // Get the current Amplify configuration to debug\n      const { Amplify } = await import('aws-amplify');\n      const currentConfig = Amplify.getConfig();\n      console.log('🔥 Current Amplify config redirects:', {\n        signIn: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignIn,\n        signOut: currentConfig.Auth?.Cognito?.loginWith?.oauth?.redirectSignOut\n      });\n\n      // Use Amplify's configured redirect URIs (which are set in main.ts based on environment)\n      console.log('🔥 Attempting Amplify signInWithRedirect...');\n\n      // Log the exact parameters being passed to signInWithRedirect\n      const signInParams = { provider: identityProvider };\n      console.log('🔥 SignInWithRedirect parameters:', JSON.stringify(signInParams, null, 2));\n\n      await signInWithRedirect(signInParams);\n      console.log('🔥 Amplify signInWithRedirect initiated successfully');\n\n    } catch (error: any) {\n      console.error('🔥🔥🔥 ERROR during social sign-in:', error);\n      console.error('🔥🔥🔥 Error details:', {\n        name: error.name,\n        message: error.message,\n        code: error.code\n      });\n\n      // Provide user-friendly error messages based on error type\n      let userMessage = 'Authentication failed. ';\n\n      if (error.message?.includes('InvalidOriginException') || error.message?.includes('redirect')) {\n        userMessage += 'Please ensure the redirect URLs are configured correctly in AWS Cognito.';\n        console.error('🔥🔥🔥 This appears to be a redirect URL configuration error in AWS Cognito');\n      } else if (error.message?.includes('provider')) {\n        userMessage += 'The OAuth provider configuration is incorrect.';\n        console.error('🔥🔥🔥 This appears to be a provider configuration error');\n      } else if (error.message?.includes('NetworkError')) {\n        userMessage += 'Network connection failed. Please check your internet connection.';\n      } else {\n        userMessage += 'An unexpected error occurred. Please try again.';\n      }\n\n      // Show a cleaner user-facing alert\n      alert(`Authentication Error\\n\\n${userMessage}`);\n\n      throw new Error(userMessage);\n    }\n  }\n\n  private async handleMobileSocialLogin(provider: AuthProvider) {\n    try {\n      console.log('Handling mobile social login for:', provider);\n\n      // Build the OAuth URL manually for mobile - use localhost redirect for in-app browser\n      const authUrl = `https://${environment.awsConfig.cognitoDomain}/oauth2/authorize?` +\n        `client_id=${environment.awsConfig.userPoolClientId}&` +\n        `response_type=code&` +\n        `scope=email+openid+profile&` +\n        `redirect_uri=http://localhost:8100&` +\n        `identity_provider=${provider}`;\n\n      console.log('Opening OAuth URL in browser:', authUrl);\n      alert(`Opening ${provider} OAuth login in in-app browser`);\n\n      // Try using window.open instead of Browser plugin\n      if (this.window) {\n        console.log('Using window.open for OAuth URL');\n        this.window.open(authUrl, '_blank', 'location=yes,hidden=no,closebuttoncaption=Done');\n      } else {\n        console.log('Fallback to Browser plugin');\n        await Browser.open({\n          url: authUrl,\n          windowName: '_blank',\n        });\n      }\n\n      console.log('Browser opened successfully');\n\n      // Set up listener for the deep link callback\n      this.setupDeepLinkListener();\n\n      // Also listen for browser navigation changes\n      this.setupBrowserListener();\n\n    } catch (error) {\n      console.error('Error in mobile social login:', error);\n      throw error;\n    }\n  }\n\n  private setupDeepLinkListener() {\n    console.log('Setting up deep link listener');\n\n    App.addListener('appUrlOpen', async (data) => {\n      console.log('Deep link received:', data.url);\n\n      if (data.url.includes('localhost:8100') || data.url.includes('tensilapp://callback')) {\n        try {\n          await Browser.close();\n          await this.processAuthCallback(data.url);\n        } catch (error) {\n          console.error('Error processing auth callback:', error);\n        }\n      }\n    });\n  }\n\n  private setupBrowserListener() {\n    console.log('Setting up browser listener');\n\n    Browser.addListener('browserFinished', () => {\n      console.log('Browser closed');\n    });\n\n    Browser.addListener('browserPageLoaded', () => {\n      console.log('Browser page loaded');\n    });\n  }\n\n  private async processAuthCallback(url: string) {\n    try {\n      console.log('Processing auth callback URL:', url);\n\n      // Extract the authorization code from the URL\n      const urlParams = new URLSearchParams(url.split('?')[1]);\n      const code = urlParams.get('code');\n\n      if (code) {\n        console.log('Authorization code received:', code);\n        // Here you would normally exchange the code for tokens\n        // For now, let's redirect to home page\n        alert('OAuth callback received! Code: ' + code);\n        // You can implement token exchange here or let Amplify handle it\n      } else {\n        console.error('No authorization code found in callback URL');\n        alert('OAuth callback error: No authorization code found');\n      }\n    } catch (error) {\n      console.error('Error processing auth callback:', error);\n      alert('Error processing OAuth callback: ' + error);\n    }\n  }\n  // Get temporary access keys from the Identity Pool\n  public async getAccessKeys(): Promise<any> {\n    const authSession = await fetchAuthSession();\n    return authSession.credentials;\n  }\n  // Get Cognito username\n  public getUserSub(): Observable<any> {\n    return from(getCurrentUser()).pipe(\n      map(authUser => (authUser.userId))\n    );\n  }\n  // Get Cognito user attributes - observable\n  public getUserAttributes() {\n    return from(fetchUserAttributes()).pipe(\n      map(attributes => (attributes))\n    );\n  }\n  // Get Cognito user email - observable\n  public getUserEmail() {\n    return from(fetchUserAttributes()).pipe(\n      map(attributes => (attributes.email))\n    );\n  }\n  // Get Cognito user attributes - promise\n  public async getUserAttributesPromise() {\n    return await fetchUserAttributes();\n  }\n  public async signUp(email: string): Promise<boolean> {\n    try {\n      const {isSignUpComplete, userId, nextStep} = await signUp({\n        username: email,\n        password: this.getRandomString(30),\n        options: {\n          userAttributes: {\n            email\n          }\n        }\n      });\n      return isSignUpComplete;\n    } catch (error) {\n      if (error.name === 'UserLambdaValidationException') {\n        // Throw the cleaned-up error instead of just returning the message\n        throw new Error(error.message.replace(/^PreSignUp failed with error\\s*/, ''));\n      }\n      throw error;\n    }\n  }\n  public async signIn(email: string) {\n    try {\n      const { isSignedIn, nextStep } = await signIn({\n        username: email,\n        options: {\n          authFlowType: 'CUSTOM_WITHOUT_SRP'\n        }\n      });\n      if (nextStep.signInStep === 'CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE') {\n        return isSignedIn;\n      }\n    } catch(error: any) {\n\t\t\tconsole.error('error signing in', error);\n      return error;\n    }\n  }\n  public async signOut() {\n\t\ttry {\n\t\t\tawait signOut();\n\t\t} catch (error) {\n\t\t\tconsole.error('error signing out: ', error);\n\t\t}\n  }\n  public async answerCustomChallenge(answer: string) {\n    // @ts-ignore\n\t\ttry {\n      const {\n        isSignedIn,\n        nextStep\n      } = await confirmSignIn({ challengeResponse: answer });\n      if (isSignedIn) {\n\t\t\t\t// login successful\n        return 'isSignedIn';\n      }\n      if ('additionalInfo' in nextStep) {\n\t\t\t\t// login failed, present the nextStep feedback (how many attempts left etc).\n\t\t\t\treturn nextStep.additionalInfo;\n      }\n    } catch (error: any) {\n      if (error.name.includes('SignInException')) {\n        return 'There was an issue, try again or return to login.';\n      }\n      if (error.name.includes('EmptyChallengeResponse')) {\n        return 'Please enter the code you were emailed';\n      }\n      return 'There was an issue, please login again.';\n\t\t}\n  }\n  private fetchAuthSession() {\n    const getSession = async () => {\n      const {\n        tokens,\n        credentials,\n        identityId,\n        userSub\n      } = await fetchAuthSession();\n\n      const {\n        idToken,\n        accessToken\n      } = tokens;\n      return idToken;\n    }\n    return getSession();\n  }\n  // returns a boolean based on auth state\n  public async isAuthenticated() {\n    try {\n      await this.fetchAuthSession();\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  // Get ID Token to make API calls when Cognito authentication is enabled on API Gateway\n  public async getIDToken() {\n      return await this.fetchAuthSession().then((result) => {\n        return result;\n      });\n  }\n  async deleteUser() {\n    return await deleteUser();\n  }\n  // Generate a password to create user but never used as we have a custom auth challenge setup in Cognito\n  private getRandomString(bytes: number) {\n    const randomValues = new Uint8Array(bytes);\n    this.window.crypto.getRandomValues(randomValues);\n    return Array.from(randomValues).map(this.intToHex).join('');\n  }\n  private intToHex(nr: number) {\n    return nr.toString(16).padStart(2, '0');\n  }\n}\n","export const environment = {\n  production: false,\n  cdn: '',\n  imgCdn: '',\n  apiGateway: '',\n  apiGatewayStage: '',\n  subscriptionsIOSAPIKey: '',\n  subscriptionsAndroidAPIKey: '',\n  // awsConfig: {\n  //   accountID: '730335457135',\n  //   region: 'eu-north-1', // Replace with your AWS region\n  //   cognitoDomain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com', // Replace with your Cognito domain\n  //   userPoolId: 'eu-north-1_bZzl2ybtS', // Replace with your User Pool ID\n  //   userPoolClientId: '2j624tdce1fe6kso61d1f0lhoc', // Replace with your App Client ID\n  //   //  // Replace with your Identity Pool ID\n  // },\n  awsConfig: {\n    region: 'eu-north-1',\n    cognitoDomain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n    userPoolId: 'eu-north-1_bZzl2ybtS',\n    userPoolClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    userPoolWebClientId: '2j624tdce1fe6kso61d1f0lhoc',\n    identityPoolId: 'eu-north-1:e4a55099-41fe-4984-9c09-849a07a26f04',\n    oauth: {\n      domain: 'eu-north-1bzzl2ybts.auth.eu-north-1.amazoncognito.com',\n      scope: ['email', 'openid', 'profile'],\n      redirectSignIn: 'tensilapp://callback',\n      redirectSignOut: 'tensilapp://callback',\n      responseType: 'code'\n    }\n  },\n  firebaseConfig: {\n    apiKey: '',\n    authDomain: '',\n    databaseURL: '',\n    projectId: '',\n    storageBucket: '',\n    messagingSenderId: '',\n    appId: '',\n    measurementId: ''\n  }\n};\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 54140;\nmodule.exports = webpackEmptyAsyncContext;","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { AuthService } from './services/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/account/login']);\n    return false;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IsNotAuthenticated implements CanActivate {\n\n  constructor(private auth: AuthService, private router: Router) { }\n\n  async canActivate(): Promise<boolean> {\n    if (!await this.auth.isAuthenticated()) {\n      return true;\n    }\n    this.router.navigate(['/home']);\n    return false;\n  }\n}\n","import 'aws-amplify/auth/enable-oauth-listener';\nimport {enableProdMode, importProvidersFrom} from '@angular/core';\nimport { environment } from './environments/environment';\nimport { Amplify } from 'aws-amplify';\nimport {bootstrapApplication} from '@angular/platform-browser';\nimport {AppComponent} from './app/app.component';\nimport {provideHttpClient, withInterceptors} from '@angular/common/http';\nimport {IonicModule, isPlatform} from '@ionic/angular';\nimport {provideRouter, withHashLocation} from '@angular/router';\nimport { routes } from './app/app-routing.module';\nimport {authInterceptor} from './app/auth.interceptor';\nimport { provideLottieOptions } from 'ngx-lottie';\nimport { IonicStorageModule } from '@ionic/storage-angular';\nimport { register } from 'swiper/element/bundle';\nimport {Hub} from 'aws-amplify/utils';\nimport { Router } from '@angular/router';\nimport { Capacitor } from '@capacitor/core';\nregister();\n\n// Player factory method for lottie-web\nexport function playerFactory() {\n  return import('lottie-web');\n}\n\nif (environment.production) {\n  enableProdMode();\n}\nconst mobileRedirect = 'tensilapp://callback';\nconst mobileSignOut = 'tensilapp://callback';\nconst webRedirectDev = 'http://localhost:8100/callback';\nconst webSignOutDev = 'http://localhost:8100';\nconst webRedirectProd = 'https://cognito-capacitor-login.vercel.app/callback';\nconst webSignOutProd = 'https://cognito-capacitor-login.vercel.app';\n\n// Determine if we're in development or production web mode\nconst isLocalDev = !environment.production && !isPlatform('capacitor') &&\n                  (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');\n\nconst webRedirect = isLocalDev ? webRedirectDev : webRedirectProd;\nconst webSignOut = isLocalDev ? webSignOutDev : webSignOutProd;\n\nAmplify.configure({\n  Auth: {\n    Cognito: {\n      userPoolId: environment.awsConfig.userPoolId,\n      userPoolClientId: environment.awsConfig.userPoolClientId,\n      identityPoolId: environment.awsConfig.identityPoolId,\n      loginWith: {\n        oauth: {\n          domain: environment.awsConfig.cognitoDomain,\n          redirectSignIn: [isPlatform('capacitor') ? mobileRedirect : webRedirect],\n          redirectSignOut: [isPlatform('capacitor') ? mobileSignOut : webSignOut],\n          responseType: 'code',\n          scopes: ['email', 'openid', 'profile'],\n        },\n      },\n    }\n  }\n});\n\n// Debug configuration\nconsole.log('🔧 AWS Amplify Configuration:', {\n  userPoolId: environment.awsConfig.userPoolId,\n  userPoolClientId: environment.awsConfig.userPoolClientId,\n  identityPoolId: environment.awsConfig.identityPoolId,\n  cognitoDomain: environment.awsConfig.cognitoDomain,\n  platform: isPlatform('capacitor') ? 'capacitor' : 'web',\n  isLocalDev: isLocalDev,\n  hostname: window.location.hostname,\n  redirectSignIn: isPlatform('capacitor') ? mobileRedirect : webRedirect,\n  redirectSignOut: isPlatform('capacitor') ? mobileSignOut : webSignOut\n});\n\nconst currentConfig = Amplify.getConfig();\nconsole.log('🔧 Final Amplify Config:', currentConfig);\n\nHub.listen('auth', async ({payload}) => {\n  switch (payload.event) {\n    case 'signInWithRedirect':\n      const router = (window as any).ng?.getInjector()?.get(Router);\n      await router?.navigate(['/home']);\n      break;\n    case 'signInWithRedirect_failure':\n      console.error('Sign in with redirect failed:', payload.data);\n      break;\n    case 'customOAuthState':\n      const state = payload.data; // this will be customState provided on signInWithRedirect function\n      break;\n  }\n});\n\n// Set up deep link handling for mobile apps\nif (Capacitor.isNativePlatform()) {\n  import('@capacitor/app').then(({ App }) => {\n    App.addListener('appUrlOpen', (data: any) => {\n      console.log('🔗 Deep link received:', data.url);\n\n      // Check if this is an OAuth callback (custom scheme or Universal Link)\n      if (data.url.includes('tensilapp://callback') || data.url.includes('https://cognito-capacitor-login.vercel.app/callback')) {\n        console.log('🔗 OAuth callback detected, processing...');\n\n        // Extract query parameters from the URL\n        try {\n          const url = new URL(data.url);\n          const code = url.searchParams.get('code');\n          const error = url.searchParams.get('error');\n\n          if (error) {\n            console.error('OAuth error:', error);\n          } else if (code) {\n            console.log('OAuth code received:', code);\n            // Let Amplify handle the token exchange\n            window.location.href = data.url;\n          }\n        } catch (err) {\n          console.error('Error processing deep link:', err);\n        }\n      }\n    });\n  });\n}\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideHttpClient(\n      withInterceptors([authInterceptor])\n    ),\n    importProvidersFrom(\n      IonicModule.forRoot(),\n      IonicStorageModule.forRoot()\n    ),\n    provideLottieOptions({\n      player: playerFactory\n    }),\n    // Use hash routing only for mobile (Capacitor) to avoid file:// protocol issues\n    // Use regular routing for web to support Universal Links and OAuth callbacks\n    provideRouter(\n      routes,\n      ...(isPlatform('capacitor') ? [withHashLocation()] : [])\n    )\n  ],\n}).catch(err => console.error(err));\n\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t37518,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js\"\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t41981,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-action-sheet_entry_js\"\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t71603,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-alert_entry_js\"\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t82273,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-app_8_entry_js\"\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t19642,\n\t\t\"node_modules_ionic_core_dist_esm_ion-avatar_3_entry_js\"\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t32095,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-back-button_entry_js\"\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t72335,\n\t\t\"node_modules_ionic_core_dist_esm_ion-backdrop_entry_js\"\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t78221,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-breadcrumb_2_entry_js\"\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t47184,\n\t\t\"node_modules_ionic_core_dist_esm_ion-button_2_entry_js\"\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t38759,\n\t\t\"node_modules_ionic_core_dist_esm_ion-card_5_entry_js\"\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t24248,\n\t\t\"node_modules_ionic_core_dist_esm_ion-checkbox_entry_js\"\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t69863,\n\t\t\"node_modules_ionic_core_dist_esm_ion-chip_entry_js\"\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t51769,\n\t\t\"node_modules_ionic_core_dist_esm_ion-col_3_entry_js\"\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t2569,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime-button_entry_js\"\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t76534,\n\t\t\"default-node_modules_ionic_core_dist_esm_data-174ad5e0_js\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime_3_entry_js\"\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t25458,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-fab_3_entry_js\"\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t70654,\n\t\t\"node_modules_ionic_core_dist_esm_ion-img_entry_js\"\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t36034,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js\"\n\t],\n\t\"./ion-input-password-toggle.entry.js\": [\n\t\t5196,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input-password-toggle_entry_js\"\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t20761,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-input_entry_js\"\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t6492,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item-option_3_entry_js\"\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t29557,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item_8_entry_js\"\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t68353,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-loading_entry_js\"\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t51024,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-menu_3_entry_js\"\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t29160,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-modal_entry_js\"\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t60393,\n\t\t\"node_modules_ionic_core_dist_esm_ion-nav_2_entry_js\"\n\t],\n\t\"./ion-picker-column-option.entry.js\": [\n\t\t68442,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column-option_entry_js\"\n\t],\n\t\"./ion-picker-column.entry.js\": [\n\t\t43110,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column_entry_js\"\n\t],\n\t\"./ion-picker.entry.js\": [\n\t\t15575,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker_entry_js\"\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t16772,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-popover_entry_js\"\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t34810,\n\t\t\"node_modules_ionic_core_dist_esm_ion-progress-bar_entry_js\"\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t14639,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-radio_2_entry_js\"\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t90628,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-range_entry_js\"\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t10852,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-refresher_2_entry_js\"\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t61479,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js\"\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t24065,\n\t\t\"node_modules_ionic_core_dist_esm_ion-ripple-effect_entry_js\"\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t57971,\n\t\t\"node_modules_ionic_core_dist_esm_ion-route_4_entry_js\"\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t93184,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-searchbar_entry_js\"\n\t],\n\t\"./ion-segment-content.entry.js\": [\n\t\t94312,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-content_entry_js\"\n\t],\n\t\"./ion-segment-view.entry.js\": [\n\t\t54540,\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment-view_entry_js\"\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t469,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment_2_entry_js\"\n\t],\n\t\"./ion-select-modal.entry.js\": [\n\t\t57101,\n\t\t\"node_modules_ionic_core_dist_esm_ion-select-modal_entry_js\"\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t78471,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-select_3_entry_js\"\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t40388,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-spinner_entry_js\"\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t42392,\n\t\t\"node_modules_ionic_core_dist_esm_ion-split-pane_entry_js\"\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t36059,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab-bar_2_entry_js\"\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t5427,\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab_2_entry_js\"\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t50198,\n\t\t\"node_modules_ionic_core_dist_esm_ion-text_entry_js\"\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t1735,\n\t\t\"default-node_modules_ionic_core_dist_esm_input_utils-28bf4ef0_js-node_modules_ionic_core_dist-c72fbc\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-textarea_entry_js\"\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t7510,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toast_entry_js\"\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t45297,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toggle_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 88996;\nmodule.exports = webpackAsyncContext;","import { NgModule } from '@angular/core';\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\nimport {IsAuthenticated} from './auth.guard';\n\nexport const routes: Routes = [\n  // INTRO\n  {\n    path: '',\n    loadComponent: () => import('./pages/intro/intro.page').then( c => c.IntroPage),\n  },\n  // HOME\n  {\n    path: 'home',\n    loadComponent: () => import('./pages/home/home.page').then(c => c.HomePage),\n    canActivate: [IsAuthenticated]\n  },\n  // ACCOUNT PAGES\n  {\n    path: 'account',\n    loadChildren: () => import('./pages/account/account-routing.module').then(m => m.AccountRoutingModule),\n  },\n  {\n    path: 'callback',\n    loadComponent: () => import('./pages/account/callback/callback.component').then( c => c.CallbackComponent),\n  },\n  // 404 page\n  {\n    path: '**',\n    loadComponent: () => import('./pages/intro/intro.page').then( c => c.IntroPage),\n  }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules }),\n  ],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n"],"names":["Component","Router","NavigationEnd","filter","UserService","UtilityService","IonicModule","App","EdgeToEdge","StatusBar","Style","AppComponent","router","userSrv","utils","REDIRECT_URI","constructor","_this","addListener","_ref","_asyncToGenerator","event","incoming","url","console","log","startsWith","URL","code","searchParams","get","error","navigate","Promise","resolve","setTimeout","getCurrentUser","user","authError","parseError","_x","apply","arguments","handleOAuthCallback","_this2","urlParams","URLSearchParams","window","location","search","state","ngOnInit","_this3","enable","setBackgroundColor","color","setStyle","style","Light","operatingSystem","then","os","watchRoutes","events","pipe","subscribe","navigationEndEvent","__decorate","selector","template","__NG_CLI_RESOURCE__0","imports","standalone","Injectable","Device","getTimezoneOffset","Date","getDateTime","toISOString","slice","getDate","getFutureDate","days","date","setDate","getFutureDateYYYYMMDD","timestamp","getPastDate","getWeekNumber","dt","type","firstDayOfYear","getFullYear","startOfYearWeek","getDay","startOfCurrentWeek","msInWeek","weekNum","Math","floor","getTime","toString","getMonday","d","day","diff","mon","months","getMonth","month","monthL","monthS","dayL","dayS","getFirstDayOfWeek","week","y","dayMs","offSetTimeStart","w","n1","n2","dateFrom","dateTo","timestampToMysqlDate","year","String","padStart","hours","getHours","minutes","getMinutes","seconds","getSeconds","pagination","content","start","end","result","map","i","push","getRandomList","array","numberRequired","taken","length","RangeError","currentAmount","randomInt","random","includes","removeDuplicates","originalArray","field","newArray","lookupObject","x","Object","keys","videoFormat","video","document","createElement","format","Boolean","canPlayType","groupBy","objectArray","property","reduce","acc","obj","key","deviceInfo","getInfo","deviceInformation","providedIn","AuthService","concatMap","from","environment","PushNotifications","Capacitor","auth","sub","cdn","userAttributes","userData","preferences","newsletter","analytics","notifications","pushListener","getUserData","updateUserProfile","body","deleteUserProfile","logDeleteRequest","pk","sk","createdDate","updatedDate","dataMap","requestDate","userId","newsletterSubscription","getUserAttributes","getUserProfile","subscribed","avatar","avatarId","request","email","emailBlacklisted","optInNewsletter","setNotification","notification","getUserSub","status","pushSubscription","section","optInReminders","reject","isNativePlatform","requestPermissions","receive","register","catch","updateUserPushSub","next","err","unregister","token","value","updateUser","createUser","updateUserAtLogin","fcmToken","timezoneOffset","lastLogin","dismissedIntroSlides","showIntroLink","optInAnalytics","ageGroup","parentalStatus","updateUserPreferences","deleteUserAccount","deleteUser","navigateByUrl","setHelpViewed","fieldName","showIntro","inject","switchMap","authInterceptor","authService","noAuthRequests","requestPath","substring","lastIndexOf","getIDToken","reqClone","clone","setHeaders","Authorization","Inject","DOCUMENT","Browser","confirmSignIn","fetchAuthSession","fetchUserAttributes","signIn","signOut","signUp","signInWithRedirect","defaultView","socialSignIn","identityProvider","isNative","platform","getPlatform","hostname","production","Amplify","currentConfig","getConfig","Auth","Cognito","loginWith","oauth","redirectSignIn","redirectSignOut","signInParams","provider","JSON","stringify","name","message","userMessage","alert","Error","handleMobileSocialLogin","authUrl","awsConfig","cognitoDomain","userPoolClientId","open","windowName","setupDeepLinkListener","setupBrowserListener","data","close","processAuthCallback","split","getAccessKeys","authSession","credentials","authUser","attributes","getUserEmail","getUserAttributesPromise","_this4","isSignUpComplete","nextStep","username","password","getRandomString","options","replace","isSignedIn","authFlowType","signInStep","answerCustomChallenge","answer","challengeResponse","additionalInfo","getSession","_ref2","tokens","identityId","userSub","idToken","accessToken","isAuthenticated","_this5","_this6","bytes","randomValues","Uint8Array","crypto","getRandomValues","Array","intToHex","join","nr","args","Document","imgCdn","apiGateway","apiGatewayStage","subscriptionsIOSAPIKey","subscriptionsAndroidAPIKey","region","userPoolId","userPoolWebClientId","identityPoolId","domain","scope","responseType","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","IsAuthenticated","canActivate","IsNotAuthenticated","enableProdMode","importProvidersFrom","bootstrapApplication","provideHttpClient","withInterceptors","isPlatform","provideRouter","withHashLocation","routes","provideLottieOptions","IonicStorageModule","Hub","playerFactory","mobileRedirect","mobileSignOut","webRedirectDev","webSignOutDev","webRedirectProd","webSignOutProd","isLocalDev","webRedirect","webSignOut","configure","scopes","listen","payload","ng","getInjector","href","providers","forRoot","player","NgModule","PreloadAllModules","RouterModule","path","loadComponent","c","IntroPage","HomePage","loadChildren","m","AccountRoutingModule","CallbackComponent","AppRoutingModule","preloadingStrategy","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[7,10]}