<ion-content class="ion-padding" id="homePage">
  <ion-grid [fixed]="true">

    <ion-row id="titleBlock">
      <ion-col size="12" size-md="10" offset-md="1" size-lg="10" offset-lg="1">
        <h1 class="center">Welcome Home!</h1>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-md="8" offset-md="2" size-lg="6" offset-lg="3">
        <ion-card *ngIf="!loading; else loadingSpinner">
          <ion-card-header>
            <ion-card-title>Your Profile</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div *ngIf="userAttributes">
              <ion-item lines="none">
                <ion-label>
                  <h3>Email</h3>
                  <p>{{ userAttributes.email }}</p>
                </ion-label>
              </ion-item>
              <ion-item lines="none" *ngIf="userAttributes.given_name">
                <ion-label>
                  <h3>First Name</h3>
                  <p>{{ userAttributes.given_name }}</p>
                </ion-label>
              </ion-item>
              <ion-item lines="none" *ngIf="userAttributes.family_name">
                <ion-label>
                  <h3>Last Name</h3>
                  <p>{{ userAttributes.family_name }}</p>
                </ion-label>
              </ion-item>
              <ion-item lines="none" *ngIf="userAttributes.picture">
                <ion-label>
                  <h3>Profile Picture</h3>
                  <img [src]="userAttributes.picture" alt="Profile" style="width: 50px; height: 50px; border-radius: 50%;">
                </ion-label>
              </ion-item>
            </div>
            <div *ngIf="!userAttributes">
              <p>No user data available</p>
            </div>
          </ion-card-content>
        </ion-card>

        <ng-template #loadingSpinner>
          <ion-card>
            <ion-card-content>
              <div style="text-align: center; padding: 20px;">
                <ion-spinner></ion-spinner>
                <p>Loading your profile...</p>
              </div>
            </ion-card-content>
          </ion-card>
        </ng-template>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12" size-md="8" offset-md="2" size-lg="6" offset-lg="3">
        <ion-button expand="block" color="danger" (click)="signOut()">
          Sign Out
        </ion-button>
      </ion-col>
    </ion-row>

  </ion-grid>
</ion-content>

<app-footer [footerData]="footerData"></app-footer>
